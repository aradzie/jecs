import{r as gn}from"./katex-BgGOMaIY.js";import{M as yi}from"./marked-6_4nRR25.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Ge,x,bn,Vn,he,zt,wn,gt,xn,St,bt,Vt,kn,Pe={},Hn=[],gi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,at=Array.isArray;function se(n,e){for(var t in e)n[t]=e[t];return n}function At(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Ke(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Ge.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return Me(n,o,i,s,null)}function Me(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++bn,__i:-1,__u:0};return s==null&&x.vnode!=null&&x.vnode(r),r}function fe(n){return n.children}function ne(n,e){this.props=n,this.context=e}function ye(n,e){if(e==null)return n.__?ye(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?ye(n):null}function Cn(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Cn(n)}}function wt(n){(!n.__d&&(n.__d=!0)&&he.push(n)&&!Je.__r++||zt!==x.debounceRendering)&&((zt=x.debounceRendering)||wn)(Je)}function Je(){var n,e,t,i,s,r,o,a;for(he.sort(gt);n=he.shift();)n.__d&&(e=he.length,i=void 0,r=(s=(t=n).__v).__e,o=[],a=[],t.__P&&((i=se({},s)).__v=s.__v+1,x.vnode&&x.vnode(i),$t(t.__P,i,s,t.__n,t.__P.namespaceURI,32&s.__u?[r]:null,o,r??ye(s),!!(32&s.__u),a),i.__v=s.__v,i.__.__k[i.__i]=i,An(o,i,a),i.__e!=r&&Cn(i)),he.length>e&&he.sort(gt));Je.__r=0}function Mn(n,e,t,i,s,r,o,a,l,u,f){var h,p,d,_,y,k,g=i&&i.__k||Hn,v=e.length;for(l=bi(t,e,g,l,v),h=0;h<v;h++)(d=t.__k[h])!=null&&(p=d.__i===-1?Pe:g[d.__i]||Pe,d.__i=h,k=$t(n,d,p,s,r,o,a,l,u,f),_=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Lt(p.ref,null,d),f.push(d.ref,d.__c||_,d)),y==null&&_!=null&&(y=_),4&d.__u||p.__k===d.__k?l=Sn(d,l,n):typeof d.type=="function"&&k!==void 0?l=k:_&&(l=_.nextSibling),d.__u&=-7);return t.__e=y,l}function bi(n,e,t,i,s){var r,o,a,l,u,f=t.length,h=f,p=0;for(n.__k=new Array(s),r=0;r<s;r++)(o=e[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=r+p,(o=n.__k[r]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Me(null,o,null,null,null):at(o)?Me(fe,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Me(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,a=null,(u=o.__i=Vi(o,t,l,h))!==-1&&(h--,(a=t[u])&&(a.__u|=2)),a==null||a.__v===null?(u==-1&&p--,typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?p--:u==l+1?p++:(u>l?p--:p++,o.__u|=4))):n.__k[r]=null;if(h)for(r=0;r<f;r++)(a=t[r])!=null&&!(2&a.__u)&&(a.__e==i&&(i=ye(a)),$n(a,a));return i}function Sn(n,e,t){var i,s;if(typeof n.type=="function"){for(i=n.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=n,e=Sn(i[s],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=ye(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Qe(n,e){return e=e||[],n==null||typeof n=="boolean"||(at(n)?n.some(function(t){Qe(t,e)}):e.push(n)),e}function Vi(n,e,t,i){var s,r,o=n.key,a=n.type,l=e[t];if(l===null||l&&o==l.key&&a===l.type&&!(2&l.__u))return t;if(i>(l!=null&&!(2&l.__u)?1:0))for(s=t-1,r=t+1;s>=0||r<e.length;){if(s>=0){if((l=e[s])&&!(2&l.__u)&&o==l.key&&a===l.type)return s;s--}if(r<e.length){if((l=e[r])&&!(2&l.__u)&&o==l.key&&a===l.type)return r;r++}}return-1}function Ut(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||gi.test(e)?t:t+"px"}function Re(n,e,t,i,s){var r;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||Ut(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||Ut(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(xn,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i?t.u=i.u:(t.u=St,n.addEventListener(e,r?Vt:bt,r)):n.removeEventListener(e,r?Vt:bt,r);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Rt(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=St++;else if(e.t<t.u)return;return t(x.event?x.event(e):e)}}}function $t(n,e,t,i,s,r,o,a,l,u){var f,h,p,d,_,y,k,g,v,W,L,j,q,C,E,z,M,U=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),r=[a=e.__e=t.__e]),(f=x.__b)&&f(e);e:if(typeof U=="function")try{if(g=e.props,v="prototype"in U&&U.prototype.render,W=(f=U.contextType)&&i[f.__c],L=f?W?W.props.value:f.__:i,t.__c?k=(h=e.__c=t.__c).__=h.__E:(v?e.__c=h=new U(g,L):(e.__c=h=new ne(g,L),h.constructor=U,h.render=xi),W&&W.sub(h),h.props=g,h.state||(h.state={}),h.context=L,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),v&&h.__s==null&&(h.__s=h.state),v&&U.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=se({},h.__s)),se(h.__s,U.getDerivedStateFromProps(g,h.__s))),d=h.props,_=h.state,h.__v=e,p)v&&U.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),v&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(v&&U.getDerivedStateFromProps==null&&g!==d&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(g,L),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(g,h.__s,L)===!1||e.__v==t.__v)){for(e.__v!=t.__v&&(h.props=g,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Y){Y&&(Y.__=e)}),j=0;j<h._sb.length;j++)h.__h.push(h._sb[j]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(g,h.__s,L),v&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(d,_,y)})}if(h.context=L,h.props=g,h.__P=n,h.__e=!1,q=x.__r,C=0,v){for(h.state=h.__s,h.__d=!1,q&&q(e),f=h.render(h.props,h.state,h.context),E=0;E<h._sb.length;E++)h.__h.push(h._sb[E]);h._sb=[]}else do h.__d=!1,q&&q(e),f=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++C<25);h.state=h.__s,h.getChildContext!=null&&(i=se(se({},i),h.getChildContext())),v&&!p&&h.getSnapshotBeforeUpdate!=null&&(y=h.getSnapshotBeforeUpdate(d,_)),a=Mn(n,at(z=f!=null&&f.type===fe&&f.key==null?f.props.children:f)?z:[z],e,t,i,s,r,o,a,l,u),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),k&&(h.__E=h.__=null)}catch(Y){if(e.__v=null,l||r!=null)if(Y.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else for(M=r.length;M--;)At(r[M]);else e.__e=t.__e,e.__k=t.__k;x.__e(Y,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=wi(t.__e,e,t,i,s,r,o,l,u);return(f=x.diffed)&&f(e),128&e.__u?void 0:a}function An(n,e,t){for(var i=0;i<t.length;i++)Lt(t[i],t[++i],t[++i]);x.__c&&x.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(r){r.call(s)})}catch(r){x.__e(r,s.__v)}})}function wi(n,e,t,i,s,r,o,a,l){var u,f,h,p,d,_,y,k=t.props,g=e.props,v=e.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(u=0;u<r.length;u++)if((d=r[u])&&"setAttribute"in d==!!v&&(v?d.localName==v:d.nodeType==3)){n=d,r[u]=null;break}}if(n==null){if(v==null)return document.createTextNode(g);n=document.createElementNS(s,v,g.is&&g),a&&(x.__m&&x.__m(e,r),a=!1),r=null}if(v===null)k===g||a&&n.data===g||(n.data=g);else{if(r=r&&Ge.call(n.childNodes),k=t.props||Pe,!a&&r!=null)for(k={},u=0;u<n.attributes.length;u++)k[(d=n.attributes[u]).name]=d.value;for(u in k)if(d=k[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=d;else if(!(u in g)){if(u=="value"&&"defaultValue"in g||u=="checked"&&"defaultChecked"in g)continue;Re(n,u,null,d,s)}}for(u in g)d=g[u],u=="children"?p=d:u=="dangerouslySetInnerHTML"?f=d:u=="value"?_=d:u=="checked"?y=d:a&&typeof d!="function"||k[u]===d||Re(n,u,d,k[u],s);if(f)a||h&&(f.__html===h.__html||f.__html===n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(h&&(n.innerHTML=""),Mn(n,at(p)?p:[p],e,t,i,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,o,r?r[0]:t.__k&&ye(t,0),a,l),r!=null)for(u=r.length;u--;)At(r[u]);a||(u="value",v=="progress"&&_==null?n.removeAttribute("value"):_!==void 0&&(_!==n[u]||v=="progress"&&!_||v=="option"&&_!==k[u])&&Re(n,u,_,k[u],s),u="checked",y!==void 0&&y!==n[u]&&Re(n,u,y,k[u],s))}return n}function Lt(n,e,t){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){x.__e(s,t)}}function $n(n,e,t){var i,s;if(x.unmount&&x.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||Lt(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){x.__e(r,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&$n(i[s],e,t||typeof n.type!="function");t||At(n.__e),n.__c=n.__=n.__e=void 0}function xi(n,e,t){return this.constructor(n,t)}function ki(n,e,t){var i,s,r,o;e==document&&(e=document.documentElement),x.__&&x.__(n,e),s=(i=!1)?null:e.__k,r=[],o=[],$t(e,n=e.__k=Ke(fe,null,[n]),s||Pe,Pe,e.namespaceURI,s?null:e.firstChild?Ge.call(e.childNodes):null,r,s?s.__e:e.firstChild,i,o),An(r,n,o)}function Hi(n,e,t){var i,s,r,o,a=se({},n.props);for(r in n.type&&n.type.defaultProps&&(o=n.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?s=e[r]:a[r]=e[r]===void 0&&o!==void 0?o[r]:e[r];return arguments.length>2&&(a.children=arguments.length>3?Ge.call(arguments,2):t),Me(n.type,a,i||n.key,s||n.ref,null)}function It(n,e){var t={__c:e="__cC"+kn++,__:n,Consumer:function(i,s){return i.children(s)},Provider:function(i){var s,r;return this.getChildContext||(s=new Set,(r={})[e]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.forEach(function(a){a.__e=!0,wt(a)})},this.sub=function(o){s.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s&&s.delete(o),a&&a.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}Ge=Hn.slice,x={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(a){n=a}throw n}},bn=0,Vn=function(n){return n!=null&&n.constructor==null},ne.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=se({},this.state),typeof n=="function"&&(n=n(se({},t),this.props)),n&&se(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),wt(this))},ne.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),wt(this))},ne.prototype.render=fe,he=[],wn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,gt=function(n,e){return n.__v.__b-e.__v.__b},Je.__r=0,xn=/(PointerCapture)$|Capture$/i,St=0,bt=Rt(!1),Vt=Rt(!0),kn=0;var Ci=0;function c(n,e,t,i,s,r){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var u={type:n,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ci,__i:-1,__u:0,__source:s,__self:r};if(typeof n=="function"&&(o=n.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return x.vnode&&x.vnode(u),u}var de,P,pt,Bt,Ne=0,Ln=[],G=x,Ft=G.__b,jt=G.__r,qt=G.diffed,Zt=G.__c,Yt=G.unmount,Xt=G.__;function Oe(n,e){G.__h&&G.__h(P,n,Ne||e),Ne=0;var t=P.__H||(P.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function lt(n){return Ne=1,Mi(Nn,n)}function Mi(n,e,t){var i=Oe(de++,2);if(i.t=n,!i.__c&&(i.__=[t?t(e):Nn(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],u=i.t(l,a);l!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=P,!P.u)){var s=function(a,l,u){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!r||r.call(this,a,l,u);var h=i.__c.props!==a;return f.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(h=!0)}}),r&&r.call(this,a,l,u)||h};P.u=!0;var r=P.shouldComponentUpdate,o=P.componentWillUpdate;P.componentWillUpdate=function(a,l,u){if(this.__e){var f=r;r=void 0,s(a,l,u),r=f}o&&o.call(this,a,l,u)},P.shouldComponentUpdate=s}return i.__N||i.__}function ct(n,e){var t=Oe(de++,3);!G.__s&&Pt(t.__H,e)&&(t.__=n,t.i=e,P.__H.__h.push(t))}function Te(n,e){var t=Oe(de++,4);!G.__s&&Pt(t.__H,e)&&(t.__=n,t.i=e,P.__h.push(t))}function ge(n){return Ne=5,ut(function(){return{current:n}},[])}function In(n,e,t){Ne=6,Te(function(){return typeof n=="function"?(n(e()),function(){return n(null)}):n?(n.current=e(),function(){return n.current=null}):void 0},t==null?t:t.concat(n))}function ut(n,e){var t=Oe(de++,7);return Pt(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function Pn(n){var e=P.context[n.__c],t=Oe(de++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(P)),e.props.value):n.__}function Si(){for(var n;n=Ln.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Ye),n.__H.__h.forEach(xt),n.__H.__h=[]}catch(e){n.__H.__h=[],G.__e(e,n.__v)}}G.__b=function(n){P=null,Ft&&Ft(n)},G.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Xt&&Xt(n,e)},G.__r=function(n){jt&&jt(n),de=0;var e=(P=n.__c).__H;e&&(pt===P?(e.__h=[],P.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(Ye),e.__h.forEach(xt),e.__h=[],de=0)),pt=P},G.diffed=function(n){qt&&qt(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Ln.push(e)!==1&&Bt===G.requestAnimationFrame||((Bt=G.requestAnimationFrame)||Ai)(Si)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),pt=P=null},G.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Ye),t.__h=t.__h.filter(function(i){return!i.__||xt(i)})}catch(i){e.some(function(s){s.__h&&(s.__h=[])}),e=[],G.__e(i,t.__v)}}),Zt&&Zt(n,e)},G.unmount=function(n){Yt&&Yt(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Ye(i)}catch(s){e=s}}),t.__H=void 0,e&&G.__e(e,t.__v))};var Kt=typeof requestAnimationFrame=="function";function Ai(n){var e,t=function(){clearTimeout(i),Kt&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);Kt&&(e=requestAnimationFrame(t))}function Ye(n){var e=P,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),P=e}function xt(n){var e=P;n.__c=n.__(),P=e}function Pt(n,e){return!n||n.length!==e.length||e.some(function(t,i){return t!==n[i]})}function Nn(n,e){return typeof e=="function"?e(n):e}const $i={id:"wire",name:"Wire",category:"Conductors",prefix:"W",shapes:[["l",-15,15,15,-15]],pins:[["a",-15,15],["a",15,-15]],labels:[0,0,"cm"],device:null},Li={id:"g",name:"Ground",category:"Conductors",prefix:"G",shapes:[["l",0,0,0,15],["l",-20,15,20,15],["l",-10,20,10,20],["l",-5,25,5,25]],pins:[["a",0,0]],labels:[0,30,"ct"],device:null},Ii={id:"p",name:"Port",category:"Conductors",prefix:"P",shapes:[["l",0,-15,0,0],["c",0,-25,10]],pins:[["a",0,0]],labels:[0,-40,"cb"],device:null},re={wire:$i,ground:Li,port:Ii};class Z extends Error{name="CircuitError";constructor(e,t){super(e,t)}}class V{static number(e){return{type:"number",...e}}static string(e){return{type:"string",...e}}static temp=V.number({defaultValue:26.85,range:["real",">",-273.15],title:"device temperature in degrees Celsius"});schema=new Map;values=new Map;constructor(e){for(const[t,i]of Object.entries(e))this.schema.set(t,i)}names(){return[...this.schema.keys()]}prop(e){const t=this.schema.get(e);if(t==null){const i=this.names();throw new Z(`Unknown property [${e}]. Expected one of ${i.map(s=>`[${s}]`).join(", ")}.`)}return t}from(e){for(const[t,i]of e.values.entries())this.set(t,i)}hasAll(){for(const[e,t]of this.schema.entries())if(!this.values.has(e)&&t.defaultValue==null)return!1;return!0}has(e){return this.prop(e),this.values.has(e)}set(e,t){const i=this.prop(e);switch(i.type){case"number":{Pi(i,e,t);break}case"string":{Ni(i,e,t);break}}return this.values.set(e,t),this}getNumber(e,t=null){const i=this.prop(e);if(i.type!=="number")throw new Z(`Property [${e}] is not a number.`);const s=this.values.get(e)??t??i.defaultValue;if(s==null)throw new Z(`Property [${e}] has no value.`);return s}getString(e,t=null){const i=this.prop(e);if(i.type!=="string")throw new Z(`Property [${e}] is not a string.`);const s=this.values.get(e)??t??i.defaultValue;if(s==null)throw new Z(`Property [${e}] has no value.`);return s}}function Pi(n,e,t){if(typeof t!="number")throw new Z(`Invalid value for property [${e}]. Expected a number, got ${ce(t)}.`);const{range:i=["real"]}=n,[s,...r]=i;switch(s){case"real":if(!Number.isFinite(t))throw new Z(`Invalid value for property [${e}]. Not a finite value.`);break;case"integer":if(!Number.isInteger(t))throw new Z(`Invalid value for property [${e}]. Not an integer value.`);break}let o=0;for(;o<r.length;){const a=r[o++],l=r[o++];switch(a){case">":if(t<=l)throw new Z(`Invalid value for property [${e}]. Expected a value larger than ${l}, got ${ce(t)}.`);break;case">=":if(t<l)throw new Z(`Invalid value for property [${e}]. Expected a value larger than or equal to ${l}, got ${ce(t)}.`);break;case"<":if(t>=l)throw new Z(`Invalid value for property [${e}]. Expected a value less than ${l}, got ${ce(t)}.`);break;case"<=":if(t>l)throw new Z(`Invalid value for property [${e}]. Expected a value less than or equal to ${l}, got ${ce(t)}.`);break;case"<>":if(t===l)throw new Z(`Invalid value for property [${e}]. Expected a value not equal to ${l}.`);break}}}function Ni(n,e,t){if(typeof t!="string")throw new Z(`Invalid value for property [${e}]. Expected a string, got ${ce(t)}.`);const{range:i=[]}=n;if(i.length>0&&!i.includes(t))throw new Z(`Invalid value for property [${e}]. Expected one of ${i.map(s=>ce(s)).join(", ")}, got ${ce(t)}.`)}function ce(n){switch(typeof n){case"string":return`"${n}"`;case"number":return String(n)}return`[${n}]`}class O{static dummy=new class extends O{static id="DUMMY";static numTerminals=0;static propertiesSchema={};static stateSchema={length:0,ops:[]};constructor(){super("DUMMY")}};static id;static numTerminals;static propertiesSchema;static stateSchema;static linear=!0;static Dc=class extends O{initTr(t,i){this.initDc(t,i)}loadTr(t,i,s){this.loadDc(t,i,s)}endTr(t,i){this.endDc(t,i)}};id;properties;state;diffs=[];constructor(e){this.id=e;const{propertiesSchema:t,stateSchema:i}=this.deviceClass;this.properties=new V(t),this.state=new Float64Array(i.length)}get deviceClass(){return this.constructor}connect(e,t){}init(e){}initDc(e,t){}loadDc(e,t,i){}endDc(e,t){}initTr(e,t){}loadTr(e,t,i){}endTr(e,t){}initAc(e){}loadAc(e,t,i){}endAc(e){}}function Ti(n){const e=new Array(n);for(let t=0;t<n;t++)e[t]=kt(n);return e}function Di(n,e=0){for(const t of n)t.fill(e)}function kt(n){return new Float64Array(n)}function Jt(n,e=0){n.fill(e)}function Nt(n,e){e.set(n)}function Ei(n){const e=new Int32Array(n);return Tn(e),e}function Tn(n){for(let e=0;e<n.length;e++)n[e]=e}function Dn(n,e,t){return Gi(n,e,t,t)}function Gi(n,e,t,i){let s=t,r=Math.abs(n[t][i]);for(t++;t<e;){const o=Math.abs(n[t][i]);o>r&&(s=t,r=o),t++}return s}function et(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}class Oi extends Error{name="MathError";constructor(e,t){super(e,t)}}class Tt extends Oi{name="SingularMatrixError";constructor(e){super("Singular matrix.",e)}}function Wi(n){const{size:e,A:t,x:i,b:s}=n;for(let r=0;r<e;r++){n.findPivot(r);const o=t[r][r];if(o===0)throw new Tt;for(let a=r;a<e;a++)t[r][a]/=o;s[r]/=o;for(let a=0;a<e;a++)if(a!==r){const l=t[a][r];for(let u=r;u<e;u++)t[a][u]-=t[r][u]*l;s[a]-=s[r]*l}}Nt(s,i)}function zi(n){const{size:e,A:t,x:i,b:s}=n;for(let r=0;r<e-1;r++){n.findPivot(r);const o=t[r][r];if(o===0)throw new Tt;for(let a=r+1;a<e;a++){const l=t[a][r]/o;for(let u=r;u<e;u++)t[a][u]-=t[r][u]*l;s[a]-=s[r]*l}}for(let r=e-1;r>=0;r--){s[r]/=t[r][r];for(let o=r-1;o>=0;o--)s[o]-=t[o][r]*s[r]}Nt(s,i)}function Ui(n){const{size:e,A:t,perm:i}=n;for(let s=0;s<e;s++){Bi(t,i,e,s);const r=t[s][s];if(r===0)throw new Tt;for(let o=s+1;o<e;o++)t[s][o]/=r;for(let o=s+1;o<e;o++)for(let a=s+1;a<e;a++)t[o][a]-=t[o][s]*t[s][a]}}function Ri(n){const{size:e,A:t,x:i,b:s,perm:r}=n;for(let o=0;o<e;o++){let a=0;for(let l=0;l<o;l++)a+=t[o][l]*i[l];i[o]=(s[r[o]]-a)/t[o][o]}for(let o=e-1;o>=0;o--){let a=0;for(let l=o+1;l<e;l++)a+=t[o][l]*s[l];s[o]=i[o]-a}Nt(s,i)}function Bi(n,e,t,i){const s=Dn(n,t,i);s!==i&&(et(n,i,s),et(e,i,s))}var Se;(function(n){n.Gauss="gauss",n.GaussJordan="gauss-jordan",n.LU="lu"})(Se||(Se={}));class Fi{size;A;x;b;perm;constructor(e){this.size=e,this.A=Ti(e),this.x=kt(e),this.b=kt(e),this.perm=Ei(e)}clear(){Di(this.A),Jt(this.x),Jt(this.b),Tn(this.perm)}solve(e){switch(e){case Se.Gauss:zi(this);break;case Se.GaussJordan:Wi(this);break;case Se.LU:Ui(this),Ri(this);break}}findPivot(e){const{size:t,A:i,b:s}=this,r=Dn(i,t,e);r!==e&&(et(i,e,r),et(s,e,r))}}var Qt;(function(n){n.Euler="euler",n.Trapezoidal="trapezoidal",n.Gear="gear"})(Qt||(Qt={}));const en=Symbol("tran"),ji=Symbol("index");class En{[en];[ji];V=0;C=0;I=0;Geq=0;Ieq=0;diff(e,t){this[en].diff(this,e,t)}}const qi=6;(()=>{const n=new Array;for(let e=0;e<=qi+1;e++)n.push(new Fi(e));return n})();class Zi extends O{static id="C";static numTerminals=2;static propertiesSchema={C:V.number({title:"capacitance",range:["real",">",0]}),V0:V.number({title:"initial voltage",defaultValue:0})};static stateSchema={length:4,ops:[{index:2,name:"V",unit:"V"},{index:3,name:"I",unit:"A"}]};diff=new En;na;nb;constructor(e){super(e),this.diffs.push(this.diff)}connect(e,[t,i]){this.na=t,this.nb=i}init(e){e[0]=this.properties.getNumber("C"),e[1]=this.properties.getNumber("V0")}endDc(e,t){const{na:i,nb:s}=this;e[2]=i.voltage-s.voltage,e[3]=0}loadTr(e,{time:t},i){const{diff:s,na:r,nb:o}=this,a=e[0],l=t>0?r.voltage-o.voltage:e[1];s.diff(l,a),e[2]=s.V,e[3]=s.I,i.stampConductance(r,o,s.Geq),i.stampCurrentSource(r,o,s.Ieq)}loadAc(e,t,i){const{na:s,nb:r}=this,o=e[0],a=2*Math.PI*t*o;i.stampConductance(s,r,0,a)}}class Yi extends O{static id="L";static numTerminals=2;static propertiesSchema={L:V.number({title:"inductance",range:["real",">",0]}),I0:V.number({title:"initial current",defaultValue:0})};static stateSchema={length:4,ops:[{index:2,name:"V",unit:"V"},{index:3,name:"I",unit:"A"}]};diff=new En;na;nb;branch;constructor(e){super(e),this.diffs.push(this.diff)}connect(e,[t,i]){this.na=t,this.nb=i,this.branch=e.makeBranch(this.na,this.nb)}init(e){e[0]=this.properties.getNumber("L"),e[1]=this.properties.getNumber("I0")}loadDc(e,t,i){const{na:s,nb:r,branch:o}=this;i.stampVoltageSource(s,r,o,0)}endDc(e,t){const{branch:i}=this;e[2]=0,e[3]=i.current}loadTr(e,{time:t},i){const{diff:s,na:r,nb:o,branch:a}=this,l=e[0],u=t>0?a.current:e[1];s.diff(u,l),e[2]=s.I,e[3]=s.V,i.stampA(a,a,-s.Geq),i.stampVoltageSource(r,o,a,s.Ieq)}loadAc(e,t,i){const{na:s,nb:r}=this,o=e[0],a=-1/(2*Math.PI*t*o);i.stampConductance(s,r,0,a)}}class Xi extends O.Dc{static id="R";static numTerminals=2;static propertiesSchema={R:V.number({title:"resistance",range:["real","<>",0]})};static stateSchema={length:3,ops:[{index:1,name:"V",unit:"V"},{index:2,name:"I",unit:"A"}]};na;nb;connect(e,[t,i]){this.na=t,this.nb=i}init(e){const t=this.properties.getNumber("R");e[0]=1/t}loadDc(e,t,i){const{na:s,nb:r}=this,o=e[0];i.stampConductance(s,r,o)}endDc(e,t){const{na:i,nb:s}=this,r=e[0],o=i.voltage-s.voltage,a=o*r;e[1]=o,e[2]=a}loadAc(e,t,i){const{na:s,nb:r}=this,o=e[0];i.stampConductance(s,r,o,0)}}function We(n){return n+273.15}const Ki=We(26.85),Ji=1602176634e-28,Qi=1380649e-29,es=3,ts=1.11,ns=2/Math.PI,is=Math.PI/2,ee=1e-12,Gn="npn",On="pnp",Dt="nfet",Et="pfet";function ss(n){switch(n){case Gn:return 1;case On:return-1}}function Wn(n){switch(n){case Dt:return 1;case Et:return-1}}function ve(n,e,t){const i=n/Ki,s=t*n*(Qi/Ji),r=e*Math.pow(i,es/t)*Math.exp((i-1)*(ts/s)),o=s*Math.log(s/Math.sqrt(2)/r);return[s,r,o]}function pe(n,e,t){if(n>=0){const i=1/t;return e*(Math.exp(i*n)-1)}else return 0}function _e(n,e,t){if(n>=0){const i=1/t;return i*e*Math.exp(i*n)}else return 0}function me(n,e,t,i){if(n>=0&&n>i&&Math.abs(n-e)>2*t)if(e>0){const s=(n-e)/t;s>0?n=e+t*(2+Math.log(s-2)):n=e-t*(2+Math.log(2-s))}else n=i;return n}function Be(n,e){return Math.abs(n-e)>.5?n>e?e+.5:e-.5:n}class zn extends O.Dc{static id="BJT";static numTerminals=3;static propertiesSchema={polarity:V.string({range:[Gn,On],title:"transistor polarity"}),Bf:V.number({defaultValue:100,range:["real",">",0],title:"forward beta"}),Br:V.number({defaultValue:1,range:["real",">",0],title:"reverse beta"}),Is:V.number({defaultValue:1e-14,range:["real",">",0],title:"saturation current"}),Nf:V.number({defaultValue:1,range:["real",">",0],title:"forward emission coefficient"}),Nr:V.number({defaultValue:1,range:["real",">",0],title:"reverse emission coefficient"}),Vaf:V.number({defaultValue:10,range:["real",">=",0],title:"forward Early voltage"}),Var:V.number({defaultValue:0,range:["real",">=",0],title:"reverse Early voltage"}),temp:V.temp};static stateSchema={length:16,ops:[{index:8,name:"Vbe",unit:"V"},{index:9,name:"Vbc",unit:"V"},{index:10,name:"Vce",unit:"V"},{index:11,name:"Ie",unit:"A"},{index:12,name:"Ic",unit:"A"},{index:13,name:"Ib",unit:"A"}]};static linear=!1;ne;nb;nc;connect(e,[t,i,s]){this.ne=t,this.nb=i,this.nc=s}initDc(e,t){const i=this.properties.getString("polarity"),s=this.properties.getNumber("Bf"),r=this.properties.getNumber("Br"),o=this.properties.getNumber("Is"),a=this.properties.getNumber("Nf"),l=this.properties.getNumber("Nr"),u=We(this.properties.getNumber("temp",t.temp)),f=ss(i),h=s/(s+1),p=r/(r+1),[d,,_]=ve(u,o,a),[y,,k]=ve(u,o,l),[,g]=ve(u,o,1);e[0]=f,e[1]=h,e[2]=p,e[3]=g,e[4]=d,e[5]=y,e[6]=_,e[7]=k}eval(e,t){const{ne:i,nb:s,nc:r}=this,o=e[0],a=e[1],l=e[2],u=e[3],f=e[4],h=e[5],p=e[6],d=e[7];let _=o*(s.voltage-i.voltage),y=o*(s.voltage-r.voltage);t&&(_=me(_,o*e[8],f,p),y=me(y,o*e[9],h,d));const k=pe(_,u,f),g=pe(y,u,h),v=l*g-k,W=a*k-g,L=_e(_,u,f)+ee,j=_e(y,u,h)+ee;e[8]=o*_,e[9]=o*y,e[10]=o*(_-y),e[11]=o*v,e[12]=o*W,e[13]=o*-(v+W),e[14]=L,e[15]=j}loadDc(e,t,i){const{ne:s,nb:r,nc:o}=this;this.eval(e,!0);const a=e[0],l=e[1],u=e[2],f=a*e[8],h=a*e[9],p=a*e[11],d=a*e[12],_=e[14],y=e[15],k=-_,g=-y,v=u*y,W=l*_;i.stampConductance(s,r,-k),i.stampConductance(o,r,-g),i.stampTransconductance(s,r,o,r,-v),i.stampTransconductance(o,r,s,r,-W),i.stampCurrentSource(s,r,a*(p-k*f-v*h)),i.stampCurrentSource(o,r,a*(d-W*f-g*h))}endDc(e,t){this.eval(e,!1)}}class ht extends O.Dc{static id="Diode";static numTerminals=2;static propertiesSchema={Is:V.number({defaultValue:1e-14,range:["real",">",0],title:"saturation current"}),N:V.number({defaultValue:1,range:["real",">",0],title:"emission coefficient"}),temp:V.temp};static stateSchema={length:7,ops:[{index:4,name:"V",unit:"V"},{index:5,name:"I",unit:"A"}]};static linear=!1;na;nc;connect(e,[t,i]){this.na=t,this.nc=i}initDc(e,t){const i=this.properties.getNumber("Is"),s=this.properties.getNumber("N"),r=We(this.properties.getNumber("temp",t.temp)),[o,a,l]=ve(r,i,s);e[0]=a,e[2]=o,e[3]=l}eval(e,t){const{na:i,nc:s}=this,r=e[0],o=e[2],a=e[3];let l=i.voltage-s.voltage;t&&(l=me(l,e[4],o,a));const u=pe(l,r,o),f=_e(l,r,o)+ee;e[4]=l,e[5]=u,e[6]=f}loadDc(e,t,i){const{na:s,nc:r}=this;this.eval(e,!0);const o=e[4],a=e[5],l=e[6];i.stampConductance(s,r,l),i.stampCurrentSource(s,r,a-l*o)}endDc(e,t){this.eval(e,!1)}}class Un extends O.Dc{static id="JFET";static numTerminals=3;static propertiesSchema={polarity:V.string({range:[Dt,Et],title:"transistor polarity"}),Vth:V.number({defaultValue:-2,range:["real"],title:"threshold voltage"}),beta:V.number({defaultValue:1e-4,range:["real",">",0],title:"transconductance parameter"}),lambda:V.number({defaultValue:0,range:["real",">=",0],title:"channel-length modulation parameter"}),Is:V.number({defaultValue:1e-14,range:["real",">",0],title:"saturation current"}),N:V.number({defaultValue:1,range:["real",">",0],title:"emission coefficient"}),temp:V.temp};static stateSchema={length:17,ops:[{index:7,name:"Vgs",unit:"V"},{index:10,name:"Vgd",unit:"V"},{index:13,name:"Vds",unit:"V"},{index:14,name:"Ids",unit:"A"}]};static linear=!1;ns;ng;nd;connect(e,[t,i,s]){this.ns=t,this.ng=i,this.nd=s}initDc(e,t){const i=this.properties.getString("polarity"),s=this.properties.getNumber("Vth"),r=this.properties.getNumber("beta"),o=this.properties.getNumber("lambda"),a=this.properties.getNumber("Is"),l=this.properties.getNumber("N"),u=We(this.properties.getNumber("temp",t.temp)),f=Wn(i),[h,p,d]=ve(u,a,l);e[0]=f,e[1]=s,e[2]=r,e[3]=o,e[4]=p,e[5]=h,e[6]=d}eval(e,t){const{ns:i,ng:s,nd:r}=this,o=e[0],a=e[1],l=e[2],u=e[3],f=e[4],h=e[5],p=e[6];let d=o*(s.voltage-i.voltage),_=o*(s.voltage-r.voltage);t&&(d=me(d,o*e[7],h,p),_=me(_,o*e[10],h,p));const y=d-_,k=pe(d,f,h),g=_e(d,f,h)+ee,v=pe(_,f,h),W=_e(_,f,h)+ee;let L,j,q;if(d>=_){const C=d-a;if(C<=0)L=0,j=ee,q=0;else{const E=u*y,z=l*(1+E);C<=y?(L=z*C*C,j=l*u*C*C,q=2*z*C):(L=z*y*(2*C-y),j=2*z*(C-y)+l*E*(2*C-y),q=2*z*y)}}else{const C=_-a;if(C<=0)L=0,j=ee,q=0;else{const E=-y,z=u*E,M=l*(1+z);C<=E?(L=-M*C*C,j=l*u*C*C+2*M*C,q=-2*M*C):(L=-M*E*(2*C-E),j=2*M*C+l*z*(2*C-E),q=-2*M*E)}}e[7]=o*d,e[10]=o*_,e[13]=o*y,e[8]=o*k,e[9]=g,e[11]=o*v,e[12]=W,e[14]=o*L,e[15]=j,e[16]=q}loadDc(e,t,i){const{ns:s,ng:r,nd:o}=this;this.eval(e,!0);const a=e[0],l=a*e[7],u=a*e[8],f=e[9],h=a*e[10],p=a*e[11],d=e[15],_=a*e[13],y=a*e[14],k=e[15],g=e[16];i.stampConductance(r,s,f),i.stampCurrentSource(r,s,a*(u-f*l)),i.stampConductance(r,o,d),i.stampCurrentSource(r,o,a*(p-d*h)),i.stampConductance(o,s,k),i.stampTransconductance(o,s,r,s,g),i.stampCurrentSource(o,s,a*(y-k*_-g*l))}endDc(e,t){this.eval(e,!1)}}class Rn extends O.Dc{static id="MOSFET";static numTerminals=4;static propertiesSchema={polarity:V.string({range:[Dt,Et],title:"transistor polarity"}),Vth:V.number({range:["real"],title:"threshold voltage"}),beta:V.number({defaultValue:.02,range:["real",">",0],title:"transconductance parameter"}),lambda:V.number({defaultValue:0,range:["real",">=",0],title:"channel-length modulation parameter"}),Is:V.number({defaultValue:1e-14,range:["real",">",0],title:"saturation current"}),N:V.number({defaultValue:1,range:["real",">",0],title:"emission coefficient"}),temp:V.temp};static stateSchema={length:19,ops:[{index:13,name:"Vgs",unit:"V"},{index:14,name:"Vgd",unit:"V"},{index:15,name:"Vds",unit:"V"},{index:16,name:"Ids",unit:"A"}]};static linear=!1;ns;ng;nd;nb;connect(e,[t,i,s,r]){this.ns=t,this.ng=i,this.nd=s,this.nb=r}initDc(e,t){const i=this.properties.getString("polarity"),s=this.properties.getNumber("Vth"),r=this.properties.getNumber("beta"),o=this.properties.getNumber("lambda"),a=this.properties.getNumber("Is"),l=this.properties.getNumber("N"),u=We(this.properties.getNumber("temp",t.temp)),f=Wn(i),[h,p,d]=ve(u,a,l);e[0]=f,e[1]=s,e[2]=r,e[3]=o,e[4]=p,e[5]=h,e[6]=d}eval(e,t){const{ns:i,ng:s,nd:r,nb:o}=this,a=e[0],l=e[1],u=e[2],f=e[3],h=e[4],p=e[5],d=e[6];let _=a*(o.voltage-i.voltage),y=a*(o.voltage-r.voltage),k=e[13]=a*(s.voltage-i.voltage),g=e[14]=a*(s.voltage-r.voltage),v=k-g;t&&(_=me(_,a*e[7],p,d),y=me(y,a*e[10],p,d),v>0?(k=Be(k,a*e[13]),v=Be(k-g,a*e[15])):(g=Be(g,a*e[14]),v=Be(k-g,a*e[15])));const W=pe(_,h,p),L=_e(_,h,p)+ee,j=pe(y,h,p),q=_e(y,h,p)+ee;let C,E,z;if(v>0){const M=k-a*l;if(M<=0)C=0,E=ee,z=0;else{const U=f*v,Y=u*(1+U);M<=v?(C=1/2*Y*M*M,E=1/2*u*f*M*M,z=Y*M):(C=Y*v*(M-v/2),E=Y*(M-v)+u*U*(M-v/2),z=Y*v)}}else{const M=g-a*l;if(M<=0)C=0,E=ee,z=0;else{const U=-v,Y=f*U,Ce=u*(1+Y);M<=U?(C=-.5*Ce*M*M,E=1/2*u*f*M*M,z=Ce*M):(C=-Ce*U*(M-U/2),E=Ce*M+u*Y*(M-U/2),z=Ce*U)}}e[7]=a*_,e[10]=a*y,e[13]=a*k,e[14]=a*g,e[15]=a*v,e[8]=a*W,e[9]=L,e[11]=a*j,e[12]=q,e[16]=a*C,e[17]=E,e[18]=z}loadDc(e,t,i){const{ns:s,ng:r,nd:o,nb:a}=this;this.eval(e,!0);const l=e[0],u=l*e[7],f=l*e[10],h=l*e[13],p=l*e[14],d=l*e[15],_=l*e[8],y=e[9],k=l*e[11],g=e[12],v=l*e[16],W=e[17],L=e[18];i.stampConductance(a,s,y),i.stampCurrentSource(a,s,l*(_-y*u)),i.stampConductance(a,o,g),i.stampCurrentSource(a,o,l*(k-g*f)),d>0?(i.stampConductance(o,s,W),i.stampTransconductance(o,s,r,s,L),i.stampCurrentSource(o,s,l*(v-W*d-L*h))):(i.stampConductance(o,s,W),i.stampTransconductance(o,s,r,o,L),i.stampCurrentSource(o,s,l*(v-W*d-L*p)))}endDc(e,t){this.eval(e,!1)}}class rs extends O.Dc{static id="OpAmp";static numTerminals=3;static propertiesSchema={gain:V.number({defaultValue:1e6,range:["real",">",0],title:"gain"}),Vmax:V.number({defaultValue:15,range:["real",">",0],title:"maximum absolute value of output voltage"})};static stateSchema={length:5,ops:[{index:2,name:"Vin",unit:"V"},{index:3,name:"Vout",unit:"V"}]};static linear=!1;np;nn;no;branch;connect(e,[t,i,s]){this.np=t,this.nn=i,this.no=s,this.branch=e.makeBranch(this.no,e.groundNode)}init(e){const t=this.properties.getNumber("gain"),i=this.properties.getNumber("Vmax");e[0]=t,e[1]=i}loadDc(e,t,i){const{np:s,nn:r,no:o,branch:a}=this,l=e[0],u=e[1],f=s.voltage-r.voltage,h=is*l*f/u,p=u*ns*Math.atan(h),d=l/(1+h*h)+ee;e[2]=f,e[3]=p,e[4]=d,i.stampA(o,a,1),i.stampA(a,s,d),i.stampA(a,r,-d),i.stampA(a,o,-1),i.stampB(a,d*f-p)}}class os extends O.Dc{static id="Ammeter";static numTerminals=2;static propertiesSchema={};static stateSchema={length:1,ops:[{index:0,name:"I",unit:"A"}]};np;nn;branch;connect(e,[t,i]){this.np=t,this.nn=i,this.branch=e.makeBranch(this.np,this.nn)}loadDc(e,t,i){const{np:s,nn:r,branch:o}=this;i.stampVoltageSource(s,r,o,0)}endDc(e,t){const{branch:i}=this;e[0]=i.current}}class as extends O.Dc{static id="Voltmeter";static numTerminals=2;static propertiesSchema={};static stateSchema={length:1,ops:[{index:0,name:"V",unit:"V"}]};np;nn;connect(e,[t,i]){this.np=t,this.nn=i}endDc(e,t){const{np:i,nn:s}=this;e[0]=i.voltage-s.voltage}}class Gl extends O.Dc{static id="CCCS";static numTerminals=4;static propertiesSchema={gain:V.number({title:"gain"})};static stateSchema={length:3,ops:[{index:1,name:"I",unit:"A"},{index:2,name:"V",unit:"V"}]};np;nn;ncp;ncn;branch;connect(e,[t,i,s,r]){this.np=t,this.nn=i,this.ncp=s,this.ncn=r,this.branch=e.makeBranch(this.ncp,this.ncn)}init(e){e[0]=this.properties.getNumber("gain")}loadDc(e,t,i){const{np:s,nn:r,ncp:o,ncn:a,branch:l}=this,u=e[0];i.stampVoltageSource(o,a,l,0),i.stampA(s,l,u),i.stampA(r,l,-u)}endDc(e,t){const{np:i,nn:s,branch:r}=this,o=e[0],a=r.current*o,l=i.voltage-s.voltage;e[1]=a,e[2]=l}}class Ol extends O.Dc{static id="CCVS";static numTerminals=4;static propertiesSchema={gain:V.number({title:"gain"})};static stateSchema={length:3,ops:[{index:1,name:"V",unit:"V"},{index:2,name:"I",unit:"A"}]};np;nn;ncp;ncn;branch1;branch2;connect(e,[t,i,s,r]){this.np=t,this.nn=i,this.ncp=s,this.ncn=r,this.branch1=e.makeBranch(this.np,this.nn),this.branch2=e.makeBranch(this.ncp,this.ncn)}init(e){e[0]=this.properties.getNumber("gain")}loadDc(e,t,i){const{np:s,nn:r,branch1:o,ncp:a,ncn:l,branch2:u}=this,f=e[0];i.stampVoltageSource(s,r,o,0),i.stampVoltageSource(a,l,u,0),i.stampA(o,u,-f)}endDc(e,t){const{np:i,nn:s,branch1:r}=this,o=i.voltage-s.voltage,a=r.current;e[1]=o,e[2]=a}}class Wl extends O{static id="Iac";static numTerminals=2;static propertiesSchema={I:V.number({title:"amplitude"}),f:V.number({title:"frequency"}),phase:V.number({title:"phase",defaultValue:0})};static stateSchema={length:5,ops:[{index:3,name:"I",unit:"A"},{index:4,name:"V",unit:"V"}]};np;nn;connect(e,[t,i]){this.np=t,this.nn=i}init(e){const t=this.properties.getNumber("I"),i=this.properties.getNumber("f"),s=this.properties.getNumber("phase"),r=2*Math.PI*i,o=s/180*Math.PI;e[0]=t,e[1]=r,e[2]=o}endDc(e,t){e[3]=0,e[4]=0}loadTr(e,{time:t,sourceFactor:i},s){const{np:r,nn:o}=this,a=e[0],l=e[1],u=e[2],f=i*a*Math.sin(l*t+u);e[3]=f,s.stampCurrentSource(r,o,f)}endTr(e,t){const{np:i,nn:s}=this;e[4]=i.voltage-s.voltage}loadAc(e,t,i){const{np:s,nn:r}=this,o=e[0],a=e[2],l=o*Math.cos(a),u=o*Math.sin(a);i.stampCurrentSource(s,r,l,u)}}class ls extends O.Dc{static id="I";static numTerminals=2;static propertiesSchema={I:V.number({title:"current"})};static stateSchema={length:3,ops:[{index:1,name:"I",unit:"A"},{index:2,name:"V",unit:"V"}]};np;nn;connect(e,[t,i]){this.np=t,this.nn=i}init(e){e[0]=this.properties.getNumber("I")}loadDc(e,{sourceFactor:t},i){const{np:s,nn:r}=this,o=e[0],a=t*o;e[1]=a,i.stampCurrentSource(s,r,a)}endDc(e,t){const{np:i,nn:s}=this;e[2]=i.voltage-s.voltage}}class zl extends O{static id="Vac";static numTerminals=2;static propertiesSchema={V:V.number({title:"amplitude"}),f:V.number({title:"frequency"}),phase:V.number({title:"phase",defaultValue:0})};static stateSchema={length:5,ops:[{index:3,name:"V",unit:"V"},{index:4,name:"I",unit:"A"}]};np;nn;branch;connect(e,[t,i]){this.np=t,this.nn=i,this.branch=e.makeBranch(this.np,this.nn)}init(e){const t=this.properties.getNumber("V"),i=this.properties.getNumber("f"),s=this.properties.getNumber("phase"),r=2*Math.PI*i,o=s/180*Math.PI;e[0]=t,e[1]=r,e[2]=o}loadDc(e,t,i){const{np:s,nn:r,branch:o}=this;i.stampVoltageSource(s,r,o,0)}endDc(e,t){e[3]=0,e[4]=0}loadTr(e,{time:t,sourceFactor:i},s){const{np:r,nn:o,branch:a}=this,l=e[0],u=e[1],f=e[2],h=i*l*Math.sin(u*t+f);e[3]=h,s.stampVoltageSource(r,o,a,h)}endTr(e,t){const{branch:i}=this,s=i.current;e[4]=s}loadAc(e,t,i){const{np:s,nn:r,branch:o}=this,a=e[0],l=e[2],u=a*Math.cos(l),f=a*Math.sin(l);i.stampVoltageSource(s,r,o,u,f)}}class Ul extends O.Dc{static id="VCCS";static numTerminals=4;static propertiesSchema={gain:V.number({title:"gain"})};static stateSchema={length:3,ops:[{index:1,name:"I",unit:"A"},{index:2,name:"V",unit:"V"}]};np;nn;ncp;ncn;branch;connect(e,[t,i,s,r]){this.np=t,this.nn=i,this.ncp=s,this.ncn=r,this.branch=e.makeBranch(this.np,this.nn)}init(e){e[0]=this.properties.getNumber("gain")}loadDc(e,t,i){const{np:s,nn:r,ncp:o,ncn:a,branch:l}=this,u=e[0];i.stampA(s,l,1),i.stampA(r,l,-1),i.stampA(l,o,u),i.stampA(l,a,-u),i.stampA(l,l,-1)}endDc(e,t){const{np:i,nn:s,branch:r}=this;e[1]=r.current,e[2]=i.voltage-s.voltage}}class Rl extends O.Dc{static id="VCVS";static numTerminals=4;static propertiesSchema={gain:V.number({title:"gain"})};static stateSchema={length:3,ops:[{index:1,name:"V",unit:"V"},{index:2,name:"I",unit:"A"}]};np;nn;ncp;ncn;branch;connect(e,[t,i,s,r]){this.np=t,this.nn=i,this.ncp=s,this.ncn=r,this.branch=e.makeBranch(this.np,this.nn)}init(e){e[0]=this.properties.getNumber("gain")}loadDc(e,t,i){const{np:s,nn:r,ncp:o,ncn:a,branch:l}=this,u=e[0];i.stampVoltageSource(s,r,l,0),i.stampA(l,o,-u),i.stampA(l,a,u)}endDc(e,t){const{np:i,nn:s,branch:r}=this;e[1]=i.voltage-s.voltage,e[2]=r.current}}class cs extends O.Dc{static id="V";static numTerminals=2;static propertiesSchema={V:V.number({title:"voltage"})};static stateSchema={length:3,ops:[{index:1,name:"V",unit:"V"},{index:2,name:"I",unit:"A"}]};np;nn;branch;connect(e,[t,i]){this.np=t,this.nn=i,this.branch=e.makeBranch(this.np,this.nn)}init(e){e[0]=this.properties.getNumber("V")}loadDc(e,{sourceFactor:t},i){const{np:s,nn:r,branch:o}=this,a=e[0],l=t*a;e[1]=l,i.stampVoltageSource(s,r,o,l)}endDc(e,t){const{branch:i}=this;e[2]=i.current}}const us={id:"r",name:"Resistor",category:"Linear",prefix:"R",shapes:[["l",0,-30,0,-20],["l",-8,-20,8,-20],["l",-8,20,8,20],["l",-8,-20,-8,20],["l",8,-20,8,20],["l",0,30,0,20]],pins:[["a",0,-30],["b",0,30]],labels:[15,0,"lm"],device:Xi},hs={id:"c",name:"Capacitor",category:"Linear",prefix:"C",shapes:[["l",0,-30,0,-6],["l",-20,-6,20,-6],["l",-20,6,20,6],["l",0,30,0,6]],pins:[["a",0,-30],["b",0,30]],labels:[30,0,"lm"],device:Zi},fs={id:"l",name:"Inductor",category:"Linear",prefix:"L",shapes:[["l",0,-30,0,-22],["a",0,-14,7,-90,90],["a",0,0,7,-90,90],["a",0,14,7,-90,90],["l",0,30,0,22]],pins:[["a",0,-30],["b",0,30]],labels:[15,0,"lm"],device:Yi},Xe={resistor:us,capacitor:hs,inductor:fs},ft=(n,e,t,i,s=10)=>{const r=Math.atan2(i-e,t-n),o=r-Math.PI/6,a=r+Math.PI/6;return[["l",n,e,t,i],["l",t,i,t-s*Math.cos(o),i-s*Math.sin(o)],["l",t,i,t-s*Math.cos(a),i-s*Math.sin(a)]]},ds={id:"d",name:"Diode",category:"Nonlinear",prefix:"D",shapes:[["l",0,-30,0,-10],["l",-15,-11,15,-11],["l",0,-10,-15,10],["l",0,-10,15,10],["l",-15,10,15,10],["l",0,30,0,10]],pins:[["a",0,-30],["b",0,30]],labels:[20,0,"lm"],device:ht},ps={id:"dz",name:"Zener diode",category:"Nonlinear",prefix:"D",shapes:[["l",0,-30,0,-10],["l",-20,-5,-15,-11],["l",-15,-11,15,-11],["l",15,-11,20,-17],["l",0,-10,-15,10],["l",0,-10,15,10],["l",-15,10,15,10],["l",0,30,0,10]],pins:[["a",0,-30],["b",0,30]],labels:[20,0,"lm"],device:ht},_s={id:"ds",name:"Schottky diode",category:"Nonlinear",prefix:"D",shapes:[["l",0,-30,0,-10],["l",-9,-17,-15,-17],["l",-15,-17,-15,-11],["l",-15,-11,15,-11],["l",15,-11,15,-5],["l",15,-5,9,-5],["l",0,-10,-15,10],["l",0,-10,15,10],["l",-15,10,15,10],["l",0,30,0,10]],pins:[["a",0,-30],["b",0,30]],labels:[20,0,"lm"],device:ht},ms={id:"dv",name:"Varicap diode",category:"Nonlinear",prefix:"D",shapes:[["l",0,-30,0,-17],["l",-15,-17,15,-17],["l",-15,-11,15,-11],["l",0,-10,-15,10],["l",0,-10,15,10],["l",-15,10,15,10],["l",0,30,0,10]],pins:[["a",0,-30],["b",0,30]],labels:[20,0,"lm"],device:ht},vs={id:"npn",name:"NPN bipolar junction transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,-20],["l",0,30,0,20],["l",-30,0,-20,0],["l",-20,-15,-20,15],["l",-20,-5,0,-20],...ft(-20,5,0,20)],pins:[["c",0,-30],["e",0,30],["b",-30,0]],labels:[10,0,"lm"],device:zn},ys={id:"pnp",name:"PNP bipolar junction transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,-20],["l",0,30,0,20],["l",-30,0,-20,0],["l",-20,-15,-20,15],...ft(0,-20,-20,-5),["l",0,20,-20,5]],pins:[["e",0,-30],["c",0,30],["b",-30,0]],labels:[10,0,"lm"],device:zn},gs={id:"nfet",name:"N-channel junction field-effect transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,-10],["l",0,30,0,10],["l",-30,0,-12,0],["l",0,-10,-12,-10],["l",0,10,-12,10],["l",-12,-15,-12,15],["l",-21,-5,-15,0],["l",-21,5,-15,0]],pins:[["d",0,-30],["s",0,30],["g",-30,0]],labels:[10,0,"lm"],device:Un},bs={id:"pfet",name:"P-channel junction field-effect transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,-10],["l",0,30,0,10],["l",-30,0,-12,0],["l",0,-10,-12,-10],["l",0,10,-12,10],["l",-12,-15,-12,15],["l",-21,0,-15,-5],["l",-21,0,-15,5]],pins:[["s",0,-30],["d",0,30],["g",-30,0]],labels:[10,0,"lm"],device:Un},Vs={id:"nmos",name:"N-channel MOS field-effect transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,-10],["l",0,30,0,0],["l",-30,0,-20,0],["l",-20,-15,-20,15],["l",0,-10,-15,-10],["l",-15,-15,-15,-6],["l",0,0,-15,0],["l",-15,-3,-15,3],["l",-13,0,-8,-4],["l",-13,0,-8,4],["l",0,10,-15,10],["l",-15,15,-15,6]],pins:[["d",0,-30],["s",0,30],["g",-30,0]],labels:[10,0,"lm"],device:Rn},ws={id:"pmos",name:"P-channel MOS field-effect transistor",category:"Nonlinear",prefix:"Q",shapes:[["l",0,-30,0,0],["l",0,30,0,10],["l",-30,0,-20,0],["l",-20,-15,-20,15],["l",0,-10,-15,-10],["l",-15,-15,-15,-6],["l",0,0,-15,0],["l",-15,-3,-15,3],["l",-6,-4,-1,0],["l",-6,4,-1,0],["l",0,10,-15,10],["l",-15,15,-15,6]],pins:[["s",0,-30],["d",0,30],["g",-30,0]],labels:[10,0,"lm"],device:Rn},xs={id:"opamp",name:"Operational amplifier",category:"Nonlinear",prefix:"OA",shapes:[["l",-50,-30,-30,-30],["l",-50,30,-30,30],["l",30,0,50,0],["l",-30,-50,30,0],["l",-30,50,30,0],["l",-30,-50,-30,50],["l",-25,-30,-15,-30],["l",-20,-35,-20,-25],["l",-25,30,-15,30]],pins:[["noninv",-50,-30],["inv",-50,30],["out",50,0]],labels:[-30,55,"lt"],device:rs},X={diode:ds,zener:ps,schottky:_s,varicap:ms,npn:vs,pnp:ys,nfet:gs,pfet:bs,nmos:Vs,pmos:ws,opamp:xs},ks={id:"vmeter",name:"Voltmeter",category:"Probes",prefix:"Pr",shapes:[["l",0,-30,0,-20],["c",0,0,20],["l",0,30,0,20],["t",0,0,"cm","V"],...ft(-25,25,25,-25)],pins:[["a",0,-30],["b",0,30]],labels:[25,0,"lm"],device:as},Hs={id:"ameter",name:"Ammeter",category:"Probes",prefix:"Pr",shapes:[["l",0,-30,0,-20],["c",0,0,20],["l",0,30,0,20],["t",0,0,"cm","A"],...ft(-25,25,25,-25)],pins:[["a",0,-30],["b",0,30]],labels:[25,0,"lm"],device:os},Cs={vmeter:ks,ameter:Hs},Ms={id:"vdc",name:"Ideal DC voltage source",category:"Sources",prefix:"V",shapes:[["l",0,-30,0,-20],["c",0,0,20],["l",0,-15,0,-5],["l",-5,-10,5,-10],["l",-5,10,5,10],["l",0,30,0,20]],pins:[["pos",0,-30],["neg",0,30]],labels:[25,0,"lm"],device:cs},Ss={id:"idc",name:"Ideal DC current source",category:"Sources",prefix:"I",shapes:[["l",0,-30,0,-20],["c",0,0,20],["l",0,10,0,-10],["l",0,-11,-5,-3],["l",0,-11,5,-3],["l",0,30,0,20]],pins:[["pos",0,-30],["neg",0,30]],labels:[25,0,"lm"],device:ls},De={vdc:Ms,idc:Ss};class As{#e=new Map;constructor(e){for(const t of e)this.#e.set(t.id,t)}[Symbol.iterator](){return this.#e.values()}get(e){const t=this.#e.get(e);if(t==null)throw new Error(`Unknown symbol [${e}]`);return t}}const Bn=new As([...Object.values(re),...Object.values(Xe),...Object.values(X),...Object.values(De),...Object.values(Cs)]);var $s=Symbol.for("preact-signals");function dt(){if(ue>1)ue--;else{for(var n,e=!1;Ae!==void 0;){var t=Ae;for(Ae=void 0,Ht++;t!==void 0;){var i=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&jn(t))try{t.c()}catch(s){e||(n=s,e=!0)}t=i}}if(Ht=0,ue--,e)throw n}}function Ls(n){if(ue>0)return n();ue++;try{return n()}finally{dt()}}var $=void 0,Ae=void 0,ue=0,Ht=0,tt=0;function Fn(n){if($!==void 0){var e=n.n;if(e===void 0||e.t!==$)return e={i:0,S:n,p:$.s,n:void 0,t:$,e:void 0,x:void 0,r:e},$.s!==void 0&&($.s.n=e),$.s=e,n.n=e,32&$.f&&n.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=$.s,e.n=void 0,$.s.n=e,$.s=e),e}}function F(n){this.v=n,this.i=0,this.n=void 0,this.t=void 0}F.prototype.brand=$s;F.prototype.h=function(){return!0};F.prototype.S=function(n){this.t!==n&&n.e===void 0&&(n.x=this.t,this.t!==void 0&&(this.t.e=n),this.t=n)};F.prototype.U=function(n){if(this.t!==void 0){var e=n.e,t=n.x;e!==void 0&&(e.x=t,n.e=void 0),t!==void 0&&(t.e=e,n.x=void 0),n===this.t&&(this.t=t)}};F.prototype.subscribe=function(n){var e=this;return Ue(function(){var t=e.value,i=$;$=void 0;try{n(t)}finally{$=i}})};F.prototype.valueOf=function(){return this.value};F.prototype.toString=function(){return this.value+""};F.prototype.toJSON=function(){return this.value};F.prototype.peek=function(){var n=$;$=void 0;try{return this.value}finally{$=n}};Object.defineProperty(F.prototype,"value",{get:function(){var n=Fn(this);return n!==void 0&&(n.i=this.i),this.v},set:function(n){if(n!==this.v){if(Ht>100)throw new Error("Cycle detected");this.v=n,this.i++,tt++,ue++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{dt()}}}});function te(n){return new F(n)}function jn(n){for(var e=n.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function qn(n){for(var e=n.s;e!==void 0;e=e.n){var t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){n.s=e;break}}}function Zn(n){for(var e=n.s,t=void 0;e!==void 0;){var i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}n.s=t}function xe(n){F.call(this,void 0),this.x=n,this.s=void 0,this.g=tt-1,this.f=4}(xe.prototype=new F).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===tt))return!0;if(this.g=tt,this.f|=1,this.i>0&&!jn(this))return this.f&=-2,!0;var n=$;try{qn(this),$=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return $=n,Zn(this),this.f&=-2,!0};xe.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}F.prototype.S.call(this,n)};xe.prototype.U=function(n){if(this.t!==void 0&&(F.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};xe.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var n=this.t;n!==void 0;n=n.x)n.t.N()}};Object.defineProperty(xe.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var n=Fn(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}});function tn(n){return new xe(n)}function Yn(n){var e=n.u;if(n.u=void 0,typeof e=="function"){ue++;var t=$;$=void 0;try{e()}catch(i){throw n.f&=-2,n.f|=8,Gt(n),i}finally{$=t,dt()}}}function Gt(n){for(var e=n.s;e!==void 0;e=e.n)e.S.U(e);n.x=void 0,n.s=void 0,Yn(n)}function Is(n){if($!==this)throw new Error("Out-of-order effect");Zn(this),$=n,this.f&=-2,8&this.f&&Gt(this),dt()}function ze(n){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}ze.prototype.c=function(){var n=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{n()}};ze.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Yn(this),qn(this),ue++;var n=$;return $=this,Is.bind(this,n)};ze.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ae,Ae=this)};ze.prototype.d=function(){this.f|=8,1&this.f||Gt(this)};function Ue(n){var e=new ze(n);try{e.c()}catch(t){throw e.d(),t}return e.d.bind(e)}var Xn,_t,Kn=[];Ue(function(){Xn=this.N})();function ke(n,e){x[n]=e.bind(null,x[n]||function(){})}function nt(n){_t&&_t(),_t=n&&n.S()}function Jn(n){var e=this,t=n.data,i=Ns(t);i.value=t;var s=ut(function(){for(var a=e,l=e.__v;l=l.__;)if(l.__c){l.__c.__$f|=4;break}var u=tn(function(){var d=i.value.value;return d===0?0:d===!0?"":d||""}),f=tn(function(){return!Vn(u.value)}),h=Ue(function(){if(this.N=Qn,f.value){var d=u.value;a.base&&a.base.nodeType===3&&(a.base.data=d)}}),p=e.__$u.d;return e.__$u.d=function(){h(),p.call(this)},[f,u]},[]),r=s[0],o=s[1];return r.value?o.peek():o.value}Jn.displayName="_st";Object.defineProperties(F.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Jn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ke("__b",function(n,e){if(typeof e.type=="string"){var t,i=e.props;for(var s in i)if(s!=="children"){var r=i[s];r instanceof F&&(t||(e.__np=t={}),t[s]=r,i[s]=r.peek())}}n(e)});ke("__r",function(n,e){nt();var t,i=e.__c;i&&(i.__$f&=-2,(t=i.__$u)===void 0&&(i.__$u=t=function(s){var r;return Ue(function(){r=this}),r.c=function(){i.__$f|=1,i.setState({})},r}())),nt(t),n(e)});ke("__e",function(n,e,t,i){nt(),n(e,t,i)});ke("diffed",function(n,e){nt();var t;if(typeof e.type=="string"&&(t=e.__e)){var i=e.__np,s=e.props;if(i){var r=t.U;if(r)for(var o in r){var a=r[o];a!==void 0&&!(o in i)&&(a.d(),r[o]=void 0)}else r={},t.U=r;for(var l in i){var u=r[l],f=i[l];u===void 0?(u=Ps(t,l,f,s),r[l]=u):u.o(f,s)}}}n(e)});function Ps(n,e,t,i){var s=e in n&&n.ownerSVGElement===void 0,r=te(t);return{o:function(o,a){r.value=o,i=a},d:Ue(function(){this.N=Qn;var o=r.value.value;i[e]!==o&&(i[e]=o,s?n[e]=o:o?n.setAttribute(e,o):n.removeAttribute(e))})}}ke("unmount",function(n,e){if(typeof e.type=="string"){var t=e.__e;if(t){var i=t.U;if(i){t.U=void 0;for(var s in i){var r=i[s];r&&r.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}n(e)});ke("__h",function(n,e,t,i){(i<3||i===9)&&(e.__$f|=2),n(e,t,i)});ne.prototype.shouldComponentUpdate=function(n,e){var t=this.__$u,i=t&&t.s!==void 0;for(var s in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var r=2&this.__$f;if(!(i||r||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var o in n)if(o!=="__source"&&n[o]!==this.props[o])return!0;for(var a in this.props)if(!(a in n))return!0;return!1};function Ns(n){return ut(function(){return te(n)},[])}var Ts=function(n){queueMicrotask(function(){queueMicrotask(n)})};function Ds(){Ls(function(){for(var n;n=Kn.shift();)Xn.call(n)})}function Qn(){Kn.push(this)===1&&(x.requestAnimationFrame||Ts)(Ds)}const{round:m}=Math,Es=(n,e)=>n.x0<=e.x0&&e.x0<=n.x1&&n.y0<=e.y0&&e.y0<=n.y1||n.x0<=e.x0&&e.x0<=n.x1&&n.y0<=e.y1&&e.y1<=n.y1||n.x0<=e.x1&&e.x1<=n.x1&&n.y0<=e.y0&&e.y0<=n.y1||n.x0<=e.x1&&e.x1<=n.x1&&n.y0<=e.y1&&e.y1<=n.y1,Gs=(n,e)=>n.x0<=e.x0&&e.x0<=n.x1&&n.x0<=e.x1&&e.x1<=n.x1&&n.y0<=e.y0&&e.y0<=n.y1&&n.y0<=e.y1&&e.y1<=n.y1,Os=["input","textarea","select","INPUT","TEXTAREA","SELECT"];function ei(n){return n instanceof Element&&Os.includes(n.tagName)}function Ws(){const{activeElement:n}=document;ei(n)&&n.blur()}const A={None:0,Shift:1,Alt:2,Control:4,Meta:8,of:n=>{let e=A.None;return n.shiftKey&&(e|=A.Shift),n.altKey&&(e|=A.Alt),n.ctrlKey&&(e|=A.Control),n.metaKey&&(e|=A.Meta),e}};function ti(...n){const e=n.map(zs);return t=>{if(ei(t.target))return!0;const i=A.of(t);for(const s of e)if((s.key==="any"||s.key===t.key||s.key===t.code)&&s.mod===i&&s.handler(t,i)!==!1)return t.preventDefault(),!0;return!1}}function zs([n,e]){let t="",i=A.None;const s=n.split("+");for(;s.length>0;){const r=s.shift();switch(r){case"Shift":i|=A.Shift;break;case"Alt":i|=A.Alt;break;case"Ctrl":i|=A.Control;break;case"Meta":i|=A.Meta;break;default:t=r;break}}return{key:t,mod:i,handler:e}}const N=4,T=2,D=1,Us=[N|T|D,N|D,N|T,N,0,T,D,T|D],Rs=[N,N|T,N|D,N|T|D,T|D,D,T,0],Bs=[T,T|D,0,D,N|T,N|D|T,N,N|D],Fs=[D,0,T|D,T,N|D,N,N|T|D,N|T],js=(n,e)=>{switch(e){case"rl":return Us[n]??0;case"rr":return Rs[n]??0;case"mx":return Bs[n]??0;case"my":return Fs[n]??0}return 0},qs=(n,e)=>{let[t,i,s]=n,r=0;return e&N&&(r=i,i=-s,s=r),e&T&&(i=-i),e&D&&(s=-s),[t,i,s]},oe=n=>n.charAt(0),ae=n=>n.charAt(1),Zs=(n,e)=>{let t=oe(n),i=ae(n);switch(e){case"mx":switch(t){case"l":t="r";break;case"r":t="l";break}break;case"my":switch(i){case"t":i="b";break;case"b":i="t";break}break}return`${t}${i}`},ni=(n,e)=>{if(e&N)switch(n){case"lt":n="rt";break;case"lm":n="ct";break;case"lb":n="lt";break;case"ct":n="rm";break;case"cb":n="lm";break;case"rt":n="rb";break;case"rm":n="cb";break;case"rb":n="lb";break}let t=oe(n),i=ae(n);if(e&T)switch(t){case"l":t="r";break;case"r":t="l";break}if(e&D)switch(i){case"t":i="b";break;case"b":i="t";break}return`${t}${i}`},Ys=(n,e)=>{switch(n[0]){case"l":return Xs(n,e);case"c":return Ks(n,e);case"a":return Js(n,e);case"t":return Qs(n,e)}return n},Xs=(n,e)=>{let[t,i,s,r,o]=n,a=0;return e&N&&(a=i,i=-s,s=a,a=r,r=-o,o=a),e&T&&(i=-i,r=-r),e&D&&(s=-s,o=-o),[t,i,s,r,o]},Ks=(n,e)=>{let[t,i,s,r]=n,o=0;return e&N&&(o=i,i=-s,s=o),e&T&&(i=-i),e&D&&(s=-s),[t,i,s,r]},Js=(n,e)=>{let[t,i,s,r,o,a]=n,l=0;return e&N&&(l=i,i=-s,s=l,o+=90,a+=90),e&T&&(i=-i,l=o,o=180-a,a=180-l),e&D&&(s=-s,l=o,o=-a,a=-l),[t,i,s,r,o,a]},Qs=(n,e)=>{let[t,i,s,r,o]=n;r=ni(r,e);let a=0;return e&N&&(a=i,i=-s,s=a),e&T&&(i=-i),e&D&&(s=-s),[t,i,s,r,o]},er=(n,e)=>{let[t,i,s]=n;s=ni(s,e);let r=0;return e&N&&(r=t,t=-i,i=r),e&T&&(t=-t),e&D&&(i=-i),[t,i,s]},ii=({shapes:n,pins:e},t,i)=>{const s={x:0,y:0},r={x:0,y:0};for(const o of n)switch(o[0]){case"l":{const[a,l,u,f,h]=o;s.x=Math.min(s.x,l,f),s.y=Math.min(s.y,u,h),r.x=Math.max(r.x,l,f),r.y=Math.max(r.y,u,h);break}case"c":{const[a,l,u,f]=o;s.x=Math.min(s.x,l-f,l+f),s.y=Math.min(s.y,u-f,u+f),r.x=Math.max(r.x,l-f,l+f),r.y=Math.max(r.y,u-f,u+f);break}case"a":{const[a,l,u,f,h,p]=o;s.x=Math.min(s.x,l-f,l+f),s.y=Math.min(s.y,u-f,l+f),r.x=Math.max(r.x,l-f,u+f),r.y=Math.max(r.y,u-f,u+f);break}}for(const[o,a,l]of e)s.x=Math.min(s.x,a),s.y=Math.min(s.y,l),r.x=Math.max(r.x,a),r.y=Math.max(r.y,l);return{x0:t+s.x,y0:i+s.y,x1:t+r.x,y1:i+r.y}};let tr=0;function nr(){return tr+=1}class ir{#e=nr();get id(){return this.#e}}let Ot=class extends ir{includes(e,t){const{x0:i,y0:s,x1:r,y1:o}=this.area;return i<=e&&e<=r&&s<=t&&t<=o}};class si{static anonymous(e){return`${e}?`}#e=new Map;constructor(e){for(const t of e)if(t instanceof le){const i=this.#n(t.symbol.prefix);i.instances.push(t),i.names.add(t.name)}}getUniqueName(e){const t=this.#n(e);let i=1;for(;;){const s=`${e}${i}`;if(!t.names.has(s))return t.names.add(s),s;i+=1}}rename(e="none"){for(const[t,i]of this.#e.entries()){switch(e){case"none":break;case"horizontal":i.instances.sort((s,r)=>s.x-r.x||s.y-r.y);break;case"vertical":i.instances.sort((s,r)=>s.y-r.y||s.x-r.x);break}i.names.clear();for(const s of i.instances)s.name=this.getUniqueName(t)}}#n(e){let t=this.#e.get(e);return t==null&&this.#e.set(e,t={instances:[],names:new Set}),t}}function sr(n,e,t){return Object.assign(Object.create(null),n,{[e]:t})}function rr(n){const e=Object.create(null);if(n!=null)for(const[t,i]of Object.entries(n.propertiesSchema))e[t]=String(i.defaultValue||"");return e}class le extends Ot{#e;#n;#o;#t;#a;#i;#r=null;#s=null;#f=null;#l=null;constructor(e,t=si.anonymous(e.prefix),i=rr(e.device),s=0,r=0,o=0){super(),this.#e=e,this.#n=t,this.#o=i,this.#t=s,this.#a=r,this.#i=o}get symbol(){return this.#e}get name(){return this.#n}set name(e){this.#n=e}get props(){return this.#o}set props(e){this.#o=e}get x(){return this.#t}get y(){return this.#a}get transform(){return this.#i}moveTo(e,t){this.#t=e,this.#a=t,this.#l=null}transformBy(e,t,i){const s=this.#t,r=this.#a;switch(e){case"rl":this.#t=t+(r-i),this.#a=i-(s-t);break;case"rr":this.#t=t-(r-i),this.#a=i+(s-t);break;case"mx":this.#t=2*t-s;break;case"my":this.#a=2*i-r;break}this.#i=js(this.#i,e),this.#r=null,this.#s=null,this.#f=null,this.#l=null}get area(){return this.#l??=ii(this,this.#t,this.#a)}get shapes(){return this.#r??=this.#e.shapes.map(e=>Ys(e,this.#i))}get pins(){return this.#s??=this.#e.pins.map(e=>qs(e,this.#i))}get labels(){return this.#f??=er(this.#e.labels,this.#i)}}const or=(n,e)=>{switch(e){case"rl":switch(n){case"h":return"v";case"v":return"h"}break;case"rr":switch(n){case"h":return"v";case"v":return"h"}break}return n};class He extends Ot{#e;#n;#o;#t;#a;#i;#r;#s=null;constructor(e,t="lt",i="h",s=0,r=0){super(),this.#e=e.trim(),this.#n=t,this.#o=i,this.#t=s,this.#a=r,this.#i=0,this.#r=0,this.#s=null}get text(){return this.#e}set text(e){this.#e=e.trim(),this.#i=0,this.#r=0,this.#s=null}get align(){return this.#n}set align(e){this.#n=e,this.#s=null}get dir(){return this.#o}set dir(e){this.#o=e,this.#s=null}get x(){return this.#t}get y(){return this.#a}get width(){return this.#i}set width(e){this.#i=e,this.#s=null}get height(){return this.#r}set height(e){this.#r=e,this.#s=null}moveTo(e,t){this.#t=e,this.#a=t,this.#s=null}transformBy(e,t,i){const s=this.#t,r=this.#a;switch(e){case"rl":this.#t=t+(r-i),this.#a=i-(s-t);break;case"rr":this.#t=t-(r-i),this.#a=i+(s-t);break;case"mx":this.#t=2*t-s;break;case"my":this.#a=2*i-r;break}this.#n=Zs(this.#n,e),this.#o=or(this.#o,e),this.#s=null}get area(){return this.#s??=this.#f()}#f(){let e=0,t=0,i=0,s=0;switch(this.#o){case"h":switch(oe(this.#n)){case"l":e=this.#t,i=this.#t+this.#i;break;case"c":e=this.#t-this.#i/2,i=this.#t+this.#i/2;break;case"r":e=this.#t-this.#i,i=this.#t;break}switch(ae(this.#n)){case"t":t=this.#a,s=this.#a+this.#r;break;case"m":t=this.#a-this.#r/2,s=this.#a+this.#r/2;break;case"b":t=this.#a-this.#r,s=this.#a;break}break;case"v":switch(oe(this.#n)){case"l":t=this.#a-this.#i,s=this.#a;break;case"c":t=this.#a-this.#i/2,s=this.#a+this.#i/2;break;case"r":t=this.#a,s=this.#a+this.#i;break}switch(ae(this.#n)){case"t":e=this.#t,i=this.#t+this.#r;break;case"m":e=this.#t-this.#r/2,i=this.#t+this.#r/2;break;case"b":e=this.#t-this.#r,i=this.#t;break}break}return{x0:e,y0:t,x1:i,y1:s}}}class R extends Ot{#e;#n;#o;#t;#a;constructor(e,t,i,s){super(),this.#e=e,this.#n=t,this.#o=i,this.#t=s,this.#a=null}get x0(){return this.#e}set x0(e){this.#e=e,this.#a=null}get y0(){return this.#n}set y0(e){this.#n=e,this.#a=null}get x1(){return this.#o}set x1(e){this.#o=e,this.#a=null}get y1(){return this.#t}set y1(e){this.#t=e,this.#a=null}get x(){return this.#e}get y(){return this.#n}moveTo(e,t){const i=this.#e,s=this.#n,r=this.#o,o=this.#t;this.#e=e,this.#n=t,this.#o=e+(r-i),this.#t=t+(o-s),this.#a=null}transformBy(e,t,i){const s=this.#e,r=this.#n,o=this.#o,a=this.#t;switch(e){case"rl":this.#e=t+(r-i),this.#n=i-(s-t),this.#o=t+(a-i),this.#t=i-(o-t);break;case"rr":this.#e=t-(r-i),this.#n=i+(s-t),this.#o=t-(a-i),this.#t=i+(o-t);break;case"mx":this.#e=2*t-s,this.#o=2*t-o;break;case"my":this.#n=2*i-r,this.#t=2*i-a;break}this.#a=null}get area(){return this.#a??={x0:Math.min(this.#e,this.#o),y0:Math.min(this.#n,this.#t),x1:Math.max(this.#e,this.#o),y1:Math.max(this.#n,this.#t)}}includes(e,t){if(this.#n===this.#t){const h=this.#n,p=Math.min(this.#e,this.#o),d=Math.max(this.#e,this.#o);return p<=e&&e<=d&&h-3<=t&&t<=h+3}if(this.#e===this.#o){const h=this.#e,p=Math.min(this.#n,this.#t),d=Math.max(this.#n,this.#t);return p<=t&&t<=d&&h-3<=e&&e<=h+3}const s=Math.abs((this.#t-this.#n)*e-(this.#o-this.#e)*t+this.#o*this.#n-this.#t*this.#e),r=Math.sqrt((this.#t-this.#n)*(this.#t-this.#n)+(this.#o-this.#e)*(this.#o-this.#e)),o=s/r,a=Math.min(this.#e,this.#o),l=Math.min(this.#n,this.#t),u=Math.max(this.#e,this.#o),f=Math.max(this.#n,this.#t);return a<=e&&e<=u&&l<=t&&t<=f&&o<=3}}function mt(n){return n===A.None?"l":n===A.Shift?"r":n===A.Alt?"d":"l"}function ar(n,e,t,i,s){return n===t&&e===i?[]:s==="d"?[new R(n,e,t,i)]:e===i?[new R(n,e,t,i)]:n===t?[new R(n,e,t,i)]:s==="l"?[new R(n,e,t,e),new R(t,e,t,i)]:[new R(n,e,n,i),new R(n,i,t,i)]}function lr(n){const e=new cr,t=new ur;for(const s of n)if(s instanceof R){const{x0:r,y0:o,x1:a,y1:l}=s;if(o===l){e.addWire(o,s);continue}if(r===a){t.addWire(r,s);continue}continue}for(const s of n){if(s instanceof le){for(const[r,o,a]of s.pins){const l=s.x+o,u=s.y+a;e.split(u,l,n),t.split(l,u,n)}continue}if(s instanceof R){const{x0:r,y0:o,x1:a,y1:l}=s;if(r===a&&o===l)continue;if(o===l){t.split(r,o,n),t.split(a,o,n);continue}if(r===a){e.split(o,r,n),e.split(l,r,n);continue}t.split(r,o,n),t.split(a,l,n),e.split(o,r,n),e.split(l,a,n);continue}}e.merge(),t.merge();let i=0;for(;i<n.length;){const s=n[i];if(s instanceof R){const{x0:r,y0:o,x1:a,y1:l}=s;if(r===a&&o===l){n.splice(i,1);continue}}i+=1}}class cr{lines=new Map;addWire(e,t){const{x0:i,x1:s}=t;t.x0=Math.min(i,s),t.x1=Math.max(i,s),t.y0=e,t.y1=e;let r=this.lines.get(e);r==null&&this.lines.set(e,r={wires:[],breakpoints:[]}),r.wires.push(t)}split(e,t,i){let s=this.lines.get(e);if(s!=null){s.breakpoints.push(t);for(const r of s.wires)if(r.x0<t&&t<r.x1){const o=new R(t,e,r.x1,e);i.push(o),s.wires.push(o),r.x1=t}}}merge(){for(const{wires:e,breakpoints:t}of this.lines.values()){e.sort((s,r)=>s.x0-r.x0);let i=1;for(;i<e.length;){const s=e[i-1],r=e[i],o=t.indexOf(s.x1),a=t.indexOf(r.x0);(o===-1||a===-1||o!==a)&&s.x1>=r.x0&&(r.x0=s.x0,r.x1=Math.max(s.x1,r.x1),s.x1=s.x0),i+=1}}}}class ur{lines=new Map;addWire(e,t){const{y0:i,y1:s}=t;t.y0=Math.min(i,s),t.y1=Math.max(i,s),t.x0=e,t.x1=e;let r=this.lines.get(e);r==null&&this.lines.set(e,r={wires:[],breakpoints:[]}),r.wires.push(t)}split(e,t,i){let s=this.lines.get(e);if(s!=null){s.breakpoints.push(t);for(const r of s.wires)if(r.y0<t&&t<r.y1){const o=new R(e,t,e,r.y1);i.push(o),s.wires.push(o),r.y1=t}}}merge(){for(const{wires:e,breakpoints:t}of this.lines.values()){e.sort((s,r)=>s.y0-r.y0);let i=1;for(;i<e.length;){const s=e[i-1],r=e[i],o=t.indexOf(s.y1),a=t.indexOf(r.y0);(o===-1||a===-1||o!==a)&&s.y1>=r.y0&&(r.y0=s.y0,r.y1=Math.max(s.y1,r.y1),s.y1=s.y0),i+=1}}}}function Ee(n){const e=[];for(const t of n){if(t instanceof le){const{x:i,y:s,transform:r,symbol:o,name:a,props:l}=t;e.push(["i",i,s,r,o.id,a,l])}if(t instanceof R){const{x0:i,y0:s,x1:r,y1:o}=t;e.push(["w",i,s,r,o])}if(t instanceof He){const{x:i,y:s,align:r,dir:o,text:a}=t;e.push(["n",i,s,r,o,a])}}return e}function be(n){const e=[];for(const t of n)switch(t[0]){case"i":{const[i,s,r,o,a,l,u]=t;e.push(new le(Bn.get(a),l,u,s,r,o));break}case"w":{const[i,s,r,o,a]=t;e.push(new R(s,r,o,a));break}case"n":{const[i,s,r,o,a,l]=t;e.push(new He(l,o,a,s,r));break}}return e}const Fe=new class{#e=[];get full(){return this.#e.length>0}take(){return be(this.#e)}put(e){this.#e=Ee(e)}clear(){this.#e=[]}};function hr(n){const e=[];for(const t of n)t instanceof le&&e.push(t);return e}function fr(n){const e=[];for(const t of n)t instanceof R&&e.push(t);return e}function dr(n){const e=[];for(const t of n)t instanceof He&&e.push(t);return e}const $e={instance:1,note:2,wire:4096,notWire:4095,all:65535};function nn(n,e,t,i=$e.all){for(const s of n)if(i&pr(s)&&s.includes(e,t))return s;return null}function pr(n){switch(!0){case n instanceof le:return $e.instance;case n instanceof He:return $e.note;case n instanceof R:return $e.wire}return 0}class _r{#e;#n;#o;constructor(e,t,i){this.#e=e,this.#n=t,this.#o=i}get name(){return this.#e}get elements(){return this.#n}get pins(){return this.#o}}class mr{#e;#n;#o;#t;constructor(e,t,i,s){this.#e=e,this.#n=t,this.#o=i,this.#t=s}get x(){return this.#e}get y(){return this.#n}get instance(){return this.#o}get name(){return this.#t}}function vr(){const n=[],e=[],t=[];return new class{get pins(){return n}get joins(){return e}get nodes(){return t}getWires(){return null}getPins(){return null}}}function yr(n){const e=[],t=[],i=[],s=new Map,r=new br(s,t,i);for(const o of n){if(o instanceof le){for(const[a,l,u]of o.pins){const f=o.x+l,h=o.y+u,p=new mr(f,h,o,a);e.push(p),r.addPin(p)}continue}o instanceof R&&r.addWire(o)}return r.connect(),new class{get pins(){return e}get joins(){return t}get nodes(){return i}getWires(o,a){return s.get(Le(o,a))?.wires??null}getPins(o,a){return s.get(Le(o,a))?.pins??null}}}const gr=new Set([De.vdc,De.idc,X.opamp,X.npn,X.pnp,X.nmos,X.pmos,X.nfet,X.pfet]);class br{cells;joins;nodes;names;constructor(e,t,i){this.cells=e,this.joins=t,this.nodes=i,this.names=new Set(["ground"])}addPin(e){this.getCell(e.x,e.y).pins.push(e)}addWire(e){this.getCell(e.x0,e.y0).wires.push(e),this.getCell(e.x1,e.y1).wires.push(e)}getCell(e,t){const i=Le(e,t);let s=this.cells.get(i);return s==null&&this.cells.set(i,s={x:e,y:t,wires:[],pins:[],color:null}),s}connect(){this.connectGrounds(),this.connectPorts(),this.connectWithSuggestedNames();let e=1;for(const t of this.cells.values())t.pins.length>0&&t.color==null&&(this.walk([t],this.getColor(this.getUniqueName(`_n${e}`))),e+=1);for(const t of this.cells.values())t.wires.length+t.pins.length>2&&this.joins.push({x:t.x,y:t.y})}connectGrounds(){const e=this.getColor("ground");for(const t of this.cells.values())for(const i of t.pins)if(i.instance.symbol===re.ground){if(e.elements.push(i.instance),t.color==null)this.walk([t],e);else if(t.color!==e){this.conflict(e,t);return}}}connectPorts(){const e=new Map;for(const t of this.cells.values())for(const i of t.pins)if(i.instance.symbol===re.port){const{name:s}=i.instance;this.names.add(s);let r=e.get(s);if(r==null&&e.set(s,r=this.getColor(s)),r.elements.push(i.instance),t.color==null)this.walk([t],r);else if(t.color!==r){this.conflict(r,t);return}}}connectWithSuggestedNames(){for(const e of this.cells.values())for(const t of e.pins)if(gr.has(t.instance.symbol)&&e.color==null){const i=`_${t.instance.name}_${t.name}`;this.walk([e],this.getColor(this.getUniqueName(i)))}}conflict(e,t){console.warn(`Node naming conflict: [${e.node.name}] and [${t.color.node.name}]`),this.nodes.length=0}walk(e,t){for(;;){const i=e.pop();if(i==null)break;i.color=t;for(const s of i.wires){t.elements.push(s);const r=i.x===s.x1&&i.y===s.y1?Le(s.x0,s.y0):Le(s.x1,s.y1),o=this.cells.get(r);o!=null&&o.color==null&&e.push(o)}for(const s of i.pins)t.pins.push(s)}}getColor(e){const t=[],i=[],s=new _r(e,t,i);return this.nodes.push(s),{node:s,elements:t,pins:i}}getUniqueName(e){if(this.names.has(e)){let t=1;for(;;){let i=`${e}_${t}`;if(!this.names.has(i)){e=i;break}t+=1}}return this.names.add(e),e}}function Le(n,e){return e+32768<<16|n+32768<<0}const sn={rewire:n=>{},connect:n=>vr()},rn={rewire:lr,connect:yr};class K{#e;#n;#o;#t;#a;#i;#r;constructor(e,t=rn){this.#e=[...e],this.#n=t,this.#o=null,this.#t=null,this.#a=null,this.#i=null,this.#r=null,this.#n.rewire(this.#e),e instanceof K&&e.#s()}[Symbol.iterator](){return this.#e[Symbol.iterator]()}get instances(){return this.#o??=hr(this.#e)}get notes(){return this.#t??=dr(this.#e)}get wires(){return this.#a??=fr(this.#e)}get network(){return this.#i??=this.#n.connect(this.#e)}get names(){return this.#r??=new si(this.#e)}append(e){return new K([...this.#e,...e],this.#n)}delete(e){return new K(this.#e.filter(t=>!e.has(t)),this.#n)}unwire(){return new K(this.#e,sn)}rewire(){return new K(this.#e,rn)}rename(e="none"){const t=new K(this.#e,this.#n);return t.names.rename(e),t}edit(e){switch(e.type){case"set-note-text":{const{note:t,text:i}=e;t.text!==i&&(t.text=i);break}case"set-note-align":{const{note:t,align:i}=e;t.align!==i&&(t.align=i);break}case"set-note-dir":{const{note:t,dir:i}=e;t.dir!==i&&(t.dir=i);break}case"set-instance-prop":{const{instance:t,name:i,value:s}=e;t.props[i]!==s&&(t.props=sr(t.props,i,s));break}}return new K(this,this.#n)}#s(){this.#e=[],this.#n=sn,this.#o=null,this.#t=null,this.#a=null,this.#i=null,this.#r=null}}function Vr(){const n=()=>{throw new Error("unusable")};return new Proxy(Object.create(null),{apply:n,construct:n,defineProperty:n,deleteProperty:n,get:n,getOwnPropertyDescriptor:n,getPrototypeOf:n,has:n,isExtensible:n,ownKeys:n,preventExtensions:n,set:n,setPrototypeOf:n})}class it{static create(e){const t=new it;return t.#e=new wr(e),t}#e=on;constructor(){}push(e,t){return this.#e.push(e,t),this.#n()}get canUndo(){return this.#e.canUndo}undo(){return[this.#e.undo(),this.#n()]}get canRedo(){return this.#e.canRedo}redo(){return[this.#e.redo(),this.#n()]}#n(){const e=new it;return e.#e=this.#e,this.#e=on,e}}class wr{#e;#n;constructor(e){this.#e=[[Ee(e),"initial"]],this.#n=0}get length(){return this.#e.length}push(e,t){this.#n+=1,this.#e.splice(this.#n),this.#e.push([Ee(e),t])}get canUndo(){return this.#n>0}undo(){this.canUndo&&(this.#n-=1);const[e]=this.#e[this.#n];return new K(be(e))}get canRedo(){return this.#n<this.#e.length-1}redo(){this.canRedo&&(this.#n+=1);const[e]=this.#e[this.#n];return new K(be(e))}}const on=Vr();class an{#e;#n;constructor(e){this.#e=[...e],this.#n=[...e].map(t=>({element:t,x:t.x,y:t.y}))}get elements(){return this.#e}moveBy(e,t){for(const{element:i,x:s,y:r}of this.#n)i.moveTo(s+e,r+t)}reset(){for(const{element:e,x:t,y:i}of this.#n)e.moveTo(t,i)}}const Q=10,xr=4,kr=30;class b{static defaultZoom=new b;#e;#n;#o;#t;static snap(e){return m(e/Q)*Q}static floor(e){return Math.floor(e/Q)*Q}static ceil(e){return Math.ceil(e/Q)*Q}constructor(e=Q,t=0,i=0){e=m(e),t=m(t),i=m(i),e=Math.max(xr,e),e=Math.min(kr,e),this.#e=e,this.#n=t,this.#o=i,this.#t=e/Q}get gridSize(){return this.#e}get x(){return this.#n}get y(){return this.#o}get scale(){return this.#t}scaleTo(e){return new b(Q*e,this.#n,this.#o)}scaleBy(e){return new b(Q*(this.#t+e),this.#n,this.#o)}zoomTo(e){return new b(e,this.#n,this.#o)}zoomBy(e){return new b(this.#e+e,this.#n,this.#o)}moveTo(e,t){return new b(this.#e,e,t)}moveBy(e,t){return new b(this.#e,this.#n+e,this.#o+t)}toGridX(e){return m((e-this.#n)/this.#t)}toGridY(e){return m((e-this.#o)/this.#t)}toScreenX(e){return m(e*this.#t+this.#n)}toScreenY(e){return m(e*this.#t+this.#o)}snapScreenX(e){return this.toScreenX(b.snap(this.toGridX(e)))}snapScreenY(e){return this.toScreenY(b.snap(this.toGridY(e)))}static center(e,t,i,s=!1){const r=i.x1-i.x0,o=i.y1-i.y0;let a=b.defaultZoom;return s&&r>0&&o>0&&(a=a.scaleTo(Math.min(e/(r+Q*2),t/(o+Q*2)))),a.moveTo(e/2-(r/2+i.x0)*a.scale,t/2-(o/2+i.y0)*a.scale)}}te(new b);const I={symbol:{normal:"#222222",selected:"#0000ff"},pin:{normal:"#222222",selected:"#0000ff"},pinFill:{normal:"#ffffff",selected:"#ffffff"},wire:{normal:"#222222",selected:"#0000ff"},outline:"#22222222",selection:"#0000ff11",gridFine:"#00000066",gridCoarse:"#000000FF",crosshair:"#0000FF66"},w=.5;class ri{#e;#n;constructor(e){this.#e=e,this.#n=e.getContext("2d")}get canvas(){return this.#e}get ctx(){return this.#n}get width(){return this.#e.width}get height(){return this.#e.height}reset(){this.#n.reset()}paintGrid(e){const t=e.scale,i=e.x,s=e.y,r=e.gridSize,o=10,a=i%r,l=i%(r*o),u=s%r,f=s%(r*o);this.#t((h,p,d)=>{if(t>=1){h.strokeStyle=I.gridFine,h.lineWidth=1,h.lineCap="butt",h.setLineDash([1,r-1]);for(let _=u;_<d;_+=r)h.beginPath(),h.moveTo(a,_+w),h.lineTo(p,_+w),h.stroke()}}),this.#t((h,p,d)=>{h.strokeStyle=t>=1?I.gridCoarse:I.gridFine,h.lineWidth=1,h.lineCap="butt",h.setLineDash([1,r-1]);for(let _=f;_<d;_+=r*o)h.beginPath(),h.moveTo(a,_+w),h.lineTo(p,_+w),h.stroke();for(let _=l;_<p;_+=r*o)h.beginPath(),h.moveTo(_+w,u),h.lineTo(_+w,d),h.stroke()}),this.#t((h,p,d)=>{h.strokeStyle=I.gridFine,h.lineWidth=1,h.lineCap="butt",h.beginPath(),h.moveTo(m(i-10*t)+w,m(s)+w),h.lineTo(m(i+10*t)+w,m(s)+w),h.moveTo(m(i)+w,m(s-10*t)+w),h.lineTo(m(i)+w,m(s+10*t)+w),h.stroke()})}paintCrosshair(e,{x:t,y:i},s){this.#t((r,o,a)=>{s?(r.strokeStyle=I.crosshair,r.lineWidth=1,r.lineCap="butt"):(r.strokeStyle=I.outline,r.lineWidth=1,r.lineCap="butt"),r.beginPath(),r.moveTo(0,e.snapScreenY(i)+w),r.lineTo(o,e.snapScreenY(i)+w),r.moveTo(e.snapScreenX(t)+w,0),r.lineTo(e.snapScreenX(t)+w,a),r.stroke()})}paintSelection(e,t,i){this.#t(s=>{s.fillStyle=I.selection,s.fillRect(m(t.x),m(t.y),m(i.x-t.x),m(i.y-t.y))})}paintInstance(e,t,i=!1){const s=e.scale,r=e.x,o=e.y,a=t.x,l=t.y;this.#t(u=>{i?(u.fillStyle=I.symbol.selected,u.strokeStyle=I.symbol.selected,u.lineWidth=3,u.lineCap="square"):(u.fillStyle=I.symbol.normal,u.strokeStyle=I.symbol.normal,u.lineWidth=1,u.lineCap="square");for(const f of t.shapes)switch(f[0]){case"l":{const[h,p,d,_,y]=f;u.beginPath(),u.moveTo(m(r+(a+p)*s)+w,m(o+(l+d)*s)+w),u.lineTo(m(r+(a+_)*s)+w,m(o+(l+y)*s)+w),u.stroke();break}case"c":{const[h,p,d,_]=f;u.beginPath(),u.ellipse(m(r+(a+p)*s)+w,m(o+(l+d)*s)+w,m(_*s),m(_*s),0,0,2*Math.PI),u.stroke();break}case"a":{const[h,p,d,_,y,k]=f;u.beginPath(),u.ellipse(m(r+(a+p)*s)+w,m(o+(l+d)*s)+w,m(_*s),m(_*s),0,y*(Math.PI/180),k*(Math.PI/180)),u.stroke();break}case"t":{const[h,p,d,_,y]=f;this.#o(u,e,_),u.fillText(y,r+(a+p)*s,o+(l+d)*s);break}}})}paintPins(e,t,i=!1){const s=e.scale,r=e.x,o=e.y,a=t.x,l=t.y;this.#t(u=>{i?(u.fillStyle=I.pinFill.selected,u.strokeStyle=I.pin.selected,u.lineWidth=3,u.lineCap="square"):(u.fillStyle=I.pinFill.normal,u.strokeStyle=I.pin.normal,u.lineWidth=1,u.lineCap="square");for(const f of t.pins){const[h,p,d]=f;u.beginPath(),u.ellipse(m(r+(a+p)*s)+w,m(o+(l+d)*s)+w,m(3*s),m(3*s),0,0,2*Math.PI),u.fill(),u.stroke()}})}paintLabels(e,t,i=!1){const s=e.scale,r=e.x,o=e.y,a=t.x,l=t.y;this.#t(u=>{i?u.fillStyle=I.symbol.selected:u.fillStyle=I.symbol.normal;const[f,h,p]=t.labels;this.#o(u,e,p),u.fillText(t.name,r+(a+f)*s,o+(l+h)*s)})}paintWire(e,t,i=!1){const s=e.scale,r=e.x,o=e.y;this.#t(a=>{i?(a.strokeStyle=I.wire.selected,a.lineWidth=3,a.lineCap="square"):(a.strokeStyle=I.wire.normal,a.lineWidth=1,a.lineCap="square");const{x0:l,y0:u,x1:f,y1:h}=t;a.beginPath(),a.moveTo(m(r+l*s)+w,m(o+u*s)+w),a.lineTo(m(r+f*s)+w,m(o+h*s)+w),a.stroke()})}paintJoins(e,t){const i=e.scale,s=e.x,r=e.y;this.#t(o=>{o.fillStyle=I.wire.normal;for(const{x:a,y:l}of t)o.beginPath(),o.ellipse(m(s+a*i)+w,m(r+l*i)+w,m(3*i),m(3*i),0,0,2*Math.PI),o.fill()})}paintOrigin(e,{x:t,y:i},s){const r=e.scale,o=e.x,a=e.y;this.#t(l=>{s?(l.strokeStyle=I.symbol.selected,l.lineWidth=1,l.lineCap="butt"):(l.strokeStyle=I.outline,l.lineWidth=1,l.lineCap="butt"),l.beginPath(),l.moveTo(m(o+(t-10)*r)+w,m(a+i*r)+w),l.lineTo(m(o+(t+10)*r)+w,m(a+i*r)+w),l.moveTo(m(o+t*r)+w,m(a+(i-10)*r)+w),l.lineTo(m(o+t*r)+w,m(a+(i+10)*r)+w),l.stroke()})}paintArea(e,{x0:t,y0:i,x1:s,y1:r},o){const a=e.scale,l=e.x,u=e.y;this.#t(f=>{o?(f.strokeStyle=I.symbol.selected,f.lineWidth=1,f.lineCap="square"):(f.strokeStyle=I.outline,f.lineWidth=1,f.lineCap="square"),f.strokeRect(m(l+t*a)+w,m(u+i*a)+w,m((s-t)*a),m((r-i)*a))})}paintSymbolIcon(e,t,i){const s=ii(e,0,0),r=b.center(t,i,s,!0);this.paintInstance(r,{x:0,y:0,shapes:e.shapes})}#o(e,t,i){switch(e.font=`${20*t.scale}px serif`,oe(i)){case"l":e.textAlign="left";break;case"c":e.textAlign="center";break;case"r":e.textAlign="right";break}switch(ae(i)){case"t":e.textBaseline="top";break;case"m":e.textBaseline="middle";break;case"b":e.textBaseline="bottom";break}}#t=e=>{const t=this.#n;t.save(),e(t,this.#e.width,this.#e.height),t.restore()}}class B{#e;constructor(e=[]){this.#e=new Set;for(const{id:t}of e)this.#e.add(t)}[Symbol.iterator](){return this.#e[Symbol.iterator]()}get size(){return this.#e.size}get full(){return this.#e.size>0}has({id:e}){return this.#e.has(e)}filter(e){return[...e].filter(({id:t})=>this.#e.has(t))}select(e){return new B(e)}add(e){const t=new B;for(const i of this.#e)t.#e.add(i);for(const{id:i}of e)t.#e.add(i);return t}delete(e){const t=new B;for(const i of this.#e)t.#e.add(i);for(const{id:i}of e)t.#e.delete(i);return t}clear(){return new B}}function st(n,e){const t={x:1/0,y:1/0},i={x:-1/0,y:-1/0};for(const s of n)e||s instanceof R?(t.x=Math.min(t.x,s.area.x0),t.y=Math.min(t.y,s.area.y0),i.x=Math.max(i.x,s.area.x1),i.y=Math.max(i.y,s.area.y1)):(t.x=Math.min(t.x,s.x),t.y=Math.min(t.y,s.y),i.x=Math.max(i.x,s.x),i.y=Math.max(i.y,s.y));return t.x<=i.x&&t.y<=i.y?{x0:t.x,y0:t.y,x1:i.x,y1:i.y}:{x0:0,y0:0,x1:0,y1:0}}function Hr(n,e){const t=st(n,!1);let i=0,s=0;switch(oe(e)){case"l":i=t.x0;break;case"c":i=b.snap((t.x0+t.x1)/2);break;case"r":i=t.x1;break}switch(ae(e)){case"t":s=t.y0;break;case"m":s=b.snap((t.y0+t.y1)/2);break;case"b":s=t.y1;break}for(const r of n)r.moveTo(r.x-i,r.y-s)}function Cr(n,e){const t=st(n,!1),i=b.snap((t.x0+t.x1)/2),s=b.snap((t.y0+t.y1)/2);for(const r of n)r.transformBy(e,i,s)}class Mr{#e={current:null};#n;#o;#t;#a;#i;#r;#s;#f;#l;constructor(e,t){this.#n=e,this.#o=te({showGrid:!0,showCrosshair:!0}),this.#t=te(t),this.#a=te(it.create(t)),this.#i=te(new b),this.#r=te(new B),this.#s=te({type:"idle",cursor:{x:100,y:100},hovered:null});const i=o=>()=>{this.#i.value=this.#i.value.zoomBy(o)},s=(o,a)=>()=>{this.#i.value=this.#i.value.moveBy(o,a)},r=o=>()=>{this.pasteInstance(o)};this.#f=ti(["Digit0",()=>{this.zoomTo("0")}],["Equal",i(1)],["Minus",i(-1)],["Home",()=>{this.zoomTo("1")}],["Space",()=>{this.zoomTo("all")}],["ArrowLeft",s(-10,0)],["Shift+ArrowLeft",s(-100,0)],["ArrowRight",s(10,0)],["Shift+ArrowRight",s(100,0)],["ArrowUp",s(0,-10)],["Shift+ArrowUp",s(0,-100)],["ArrowDown",s(0,10)],["Shift+ArrowDown",s(0,100)],["Ctrl+a",()=>{this.select("all")}],["Ctrl+x",()=>{this.selectionCut()}],["Ctrl+c",()=>{this.selectionCopy()}],["Ctrl+v",()=>{this.selectionPaste()}],["Delete",()=>{this.selectionDelete()}],["Ctrl+z",()=>{this.undo()}],["Ctrl+y",()=>{this.redo()}],["Alt+l",()=>{if(!this.transformSelection("rl"))return!1}],["Alt+r",()=>{if(!this.transformSelection("rr"))return!1}],["Alt+h",()=>{if(!this.transformSelection("mx"))return!1}],["Alt+v",()=>{if(!this.transformSelection("my"))return!1}],["Escape",()=>{if(!this.#u()){if(this.#r.value.full){this.#r.value=this.#r.value.clear();return}return!1}}],["w",()=>{if(this.#u(),!this.#x())return!1}],["g",r(re.ground)],["o",r(re.port)],["v",r(De.vdc)],["i",r(De.idc)],["r",r(Xe.resistor)],["c",r(Xe.capacitor)],["l",r(Xe.inductor)],["d",r(X.diode)],["n",r(X.npn)],["p",r(X.pnp)],["Shift+N",r(X.nmos)],["Shift+P",r(X.pmos)],["a",r(X.opamp)],["t",()=>{this.pasteNote("")}])}get focusRef(){return this.#e}get library(){return this.#n}get settings(){return this.#o.value}get schematic(){return this.#t.value}get history(){return this.#a.value}get zoom(){return this.#i.value}get selection(){return this.#r.value}get mouseAction(){return this.#s.value}attach(e){this.#l=new ri(e),this.#i.value=this.#y(!1)}handleFocus=e=>{this.#c()};handleBlur=e=>{this.#u(),this.#c()};handleKeyDown=e=>{this.#f(e)||this.#g(e)};handleKeyUp=e=>{this.#g(e)};#g(e){const{key:t}=e,i=A.of(e);if(t==="Shift"&&this.#H(t,i)){e.preventDefault();return}if(t==="Alt"&&this.#H(t,i)){e.preventDefault();return}if(t==="Shift"&&this.#C(t,i)){e.preventDefault();return}}handleMouseDown=e=>{Ws();const t=e.button,i=A.of(e),s=this.#p(e);t===0&&i===A.None&&(this.#v(s,i)||this.#w(s,i)||this.#b(s))||t===0&&i===A.Shift&&(this.#v(s,i)||this.#w(s,i)||this.#b(s))||t===0&&i===A.Alt&&this.#v(s,i)||t===1&&i===A.None&&this.#O(s)};handleMouseMove=e=>{const t=A.of(e),i=this.#p(e);this.#T(i)||this.#k(i,t)||this.#A(i)||this.#I(i)||this.#V(i,t)||this.#W(i)||this.#s.value.type==="idle"&&this.#_(i)&&this.#c(i)};handleMouseUp=e=>{const t=this.#p(e);this.#E(t)||this.#$(t)||this.#P(t)||this.#M(t)||this.#c(t)};handleWheel=e=>{e.preventDefault();const t=A.of(e);if(this.#s.value.type==="idle"&&t===A.None){this.#i.value=this.#i.value.zoomBy(-Math.sign(e.deltaY));return}};handleContextMenu=e=>{e.preventDefault()};#p(e){return{x:e.offsetX,y:e.offsetY}}#_(e){const t=this.#i.value.toGridX(e.x),i=this.#i.value.toGridY(e.y),s=this.#i.value.toGridX(this.#s.value.cursor.x),r=this.#i.value.toGridY(this.#s.value.cursor.y);return b.snap(t)!==b.snap(s)||b.snap(i)!==b.snap(r)}#c(e=this.#s.value.cursor){const t=b.snap(this.#i.value.toGridX(e.x)),i=b.snap(this.#i.value.toGridY(e.y)),s=nn(this.#t.value,t,i,$e.notWire);this.#s.value={type:"idle",cursor:e,hovered:s}}#b(e){return this.#s.value.type==="idle"?(this.#r.value=this.#r.value.clear(),this.#s.value={type:"select",cursor:{...e},origin:{...e}},!0):!1}#V(e,t){if(this.#s.value.type==="select"){const{origin:i}=this.#s.value,s={x0:this.#i.value.toGridX(Math.min(i.x,e.x)),y0:this.#i.value.toGridY(Math.min(i.y,e.y)),x1:this.#i.value.toGridX(Math.max(i.x,e.x)),y1:this.#i.value.toGridY(Math.max(i.y,e.y))};for(const r of this.#t.value)(t===A.Shift?Es(s,r.area):Gs(s,r.area))?this.#r.value=this.#r.value.add([r]):this.#r.value=this.#r.value.delete([r]);return this.#s.value={type:"select",cursor:e,origin:i},!0}return!1}#C(e,t){return this.#s.value.type==="select"?this.#V(this.#s.value.cursor,t):!1}#M(e){if(this.#s.value.type==="select"){const{origin:t}=this.#s.value;return e.x===t.x&&e.y===t.y&&(this.#r.value=this.#r.value.clear()),this.#c(e),!0}return!1}#S(){return this.#s.value.type==="select"?(this.#r.value=new B,this.#c(),!0):!1}#w(e,t){if(this.#s.value.type==="idle"){const i=nn(this.#t.value,this.#i.value.toGridX(e.x),this.#i.value.toGridY(e.y));if(i!=null){this.#r.value.has(i)||(this.#r.value=t===A.Shift?this.#r.value.add([i]):this.#r.value.select([i]));const s=Ee(this.#t.value),r=new an(this.#r.value.filter(this.#t.value));return this.#t.value=this.#t.value.unwire(),this.#s.value={type:"move",cursor:{...e},origin:{...e},undo:s,mover:r},!0}}return!1}#A(e){if(this.#s.value.type==="move"){if(this.#_(e)){const{origin:t,undo:i,mover:s}=this.#s.value,r=b.snap(this.#i.value.toGridX(t.x)),o=b.snap(this.#i.value.toGridY(t.y)),a=b.snap(this.#i.value.toGridX(e.x)),l=b.snap(this.#i.value.toGridY(e.y));s.moveBy(a-r,l-o),this.#t.value=this.#t.value.unwire(),this.#s.value={type:"move",cursor:e,origin:t,undo:i,mover:s}}return!0}return!1}#$(e){if(this.#s.value.type==="move"){const{origin:t,mover:i}=this.#s.value,s=b.snap(this.#i.value.toGridX(t.x)),r=b.snap(this.#i.value.toGridY(t.y)),o=b.snap(this.#i.value.toGridX(e.x)),a=b.snap(this.#i.value.toGridY(e.y));return i.moveBy(o-s,a-r),this.#t.value=this.#t.value.rewire(),(s!==o||r!==a)&&this.#h("move selection"),this.#c(e),!0}return!1}#L(){if(this.#s.value.type==="move"){const{undo:e}=this.#s.value;return this.#t.value=new K(be(e)),this.#r.value=new B,this.#c(),!0}return!1}#m(e){if(this.#s.value.type==="idle"){const{cursor:t}=this.#s.value;Hr(e,"cm");const i=Ee(this.#t.value),s=new an(e),r=b.snap(this.#i.value.toGridX(t.x)),o=b.snap(this.#i.value.toGridY(t.y));return s.moveBy(r,o),this.#t.value=this.#t.value.unwire().append(e).rename(),this.#r.value=new B(e),this.#s.value={type:"paste",cursor:t,undo:i,mover:s},!0}return!1}#I(e){if(this.#s.value.type==="paste"){if(this.#_(e)){const{undo:t,mover:i}=this.#s.value,s=b.snap(this.#i.value.toGridX(e.x)),r=b.snap(this.#i.value.toGridY(e.y));i.moveBy(s,r),this.#t.value=this.#t.value.unwire(),this.#s.value={type:"paste",cursor:e,undo:t,mover:i}}return!0}return!1}#P(e){if(this.#s.value.type==="paste"){const{mover:t}=this.#s.value,i=b.snap(this.#i.value.toGridX(e.x)),s=b.snap(this.#i.value.toGridY(e.y));return t.moveBy(i,s),this.#t.value=this.#t.value.rewire(),this.#h("paste"),this.#c(e),!0}return!1}#N(){if(this.#s.value.type==="paste"){const{undo:e}=this.#s.value;return this.#t.value=new K(be(e)),this.#r.value=new B,this.#c(),!0}return!1}#x(){if(this.#s.value.type==="idle"){this.#r.value=this.#r.value.clear();const{cursor:e}=this.#s.value;return this.#s.value={type:"wire-start",cursor:e},!0}return!1}#T(e){return this.#s.value.type==="wire-start"?(this.#s.value={type:"wire-start",cursor:e},!0):!1}#D(){return this.#s.value.type==="wire-start"?(this.#c(),!0):!1}#v(e,t){return this.#s.value.type==="idle"&&this.#z(e)?(this.#r.value=this.#r.value.clear(),this.#s.value={type:"wire",cursor:{...e},origin:{...e},wires:[],shape:mt(t)},!0):this.#s.value.type==="wire-start"?(this.#s.value={type:"wire",cursor:{...e},origin:{...e},wires:[],shape:mt(t)},!0):!1}#k(e,t){if(this.#s.value.type==="wire"){const{origin:i}=this.#s.value,s=b.snap(this.#i.value.toGridX(i.x)),r=b.snap(this.#i.value.toGridY(i.y)),o=b.snap(this.#i.value.toGridX(e.x)),a=b.snap(this.#i.value.toGridY(e.y)),l=mt(t),u=ar(s,r,o,a,l);return this.#s.value={type:"wire",cursor:e,origin:i,wires:u,shape:l},!0}return!1}#H(e,t){return this.#s.value.type==="wire"?this.#k(this.#s.value.cursor,t):!1}#E(e){return this.#s.value.type==="wire"?(this.#t.value=this.#t.value.append(this.#s.value.wires),this.#h("draw wires"),this.#c(e),!0):!1}#G(){return this.#s.value.type==="wire"?(this.#c(),!0):!1}#O(e){return this.#s.value.type==="idle"?(this.#s.value={type:"scroll",cursor:{...e},origin:{...e},offset:{x:this.#i.value.x,y:this.#i.value.y}},!0):!1}#W(e){if(this.#s.value.type==="scroll"){const{origin:t,offset:i}=this.#s.value;return this.#i.value=this.#i.value.moveTo(i.x+(e.x-t.x),i.y+(e.y-t.y)),this.#s.value={type:"scroll",cursor:e,origin:t,offset:i},!0}return!1}#u(){return!!(this.#D()||this.#G()||this.#L()||this.#N()||this.#S())}#z(e){const{network:t}=this.#t.value,i=this.#i.value.toGridX(e.x),s=this.#i.value.toGridY(e.y),r=b.snap(i),o=b.snap(s);return r-5<=i&&i<=r+5&&o-5<=s&&s<=o+5&&(t.getWires(r,o)!=null||t.getPins(r,o)!=null)}#y(e){return b.center(this.#l.width,this.#l.height,st(this.#t.peek(),!0),e)}#h(e){this.#a.value=this.#a.value.push(this.#t.value,e)}edit(e){this.#t.value=this.#t.value.edit(e)}transformSelection(e){if(this.#r.value.full){const t=this.#r.value.filter(this.#t.value);switch(Cr(t,e),this.#t.value=new K(this.#t.value),e){case"rl":this.#h("rotate counter-clockwise");break;case"rr":this.#h("rotate clockwise");break;case"mx":this.#h("flip from left to right");break;case"my":this.#h("flip from top to bottom");break}return!0}return!1}pasteInstance(e){this.focus(),this.#u(),e===re.wire?this.#x():this.#m([new le(e)])}pasteNote(e){this.focus(),this.#u(),this.#m([new He(e)])}undo(){if(this.#a.value.canUndo){this.#u();const[e,t]=this.#a.value.undo();this.#t.value=e,this.#a.value=t,this.#r.value=new B}}redo(){if(this.#a.value.canRedo){this.#u();const[e,t]=this.#a.value.redo();this.#t.value=e,this.#a.value=t,this.#r.value=new B}}select(e){switch(this.#u(),e){case"all":this.#r.value=new B(this.#t.value);break;case"none":this.#r.value=new B;break;case"invert":this.#r.value=new B([...this.#t.value].filter(t=>!this.#r.value.has(t)));break;default:this.#r.value=new B(e);break}}selectionCut(){this.#u(),this.#r.value.size>0&&(Fe.put(this.#r.value.filter(this.#t.value)),this.#t.value=this.#t.value.delete(this.#r.value),this.#r.value=new B,this.#h("cut"))}selectionCopy(){this.#u(),this.#r.value.size>0&&Fe.put(this.#r.value.filter(this.#t.value))}selectionPaste(){Fe.full&&(this.#u(),this.#m(Fe.take()))}selectionDelete(){this.#u(),this.#r.value.size>0&&(this.#t.value=this.#t.value.delete(this.#r.value),this.#r.value=new B,this.#h("delete"))}zoomTo(e){switch(e){case"+":this.#i.value=this.#i.value.zoomBy(1);break;case"-":this.#i.value=this.#i.value.zoomBy(-1);break;case"0":this.#i.value=new b().moveTo(20,20);break;case"1":this.#i.value=this.#y(!1);break;case"all":this.#i.value=this.#y(!0);break}}updateSettings(e){this.#o.value={...this.#o.value,...e}}focus(){this.#e.current?.focus()}blur(){this.#e.current?.blur()}get focused(){return this.#e.current?.focused??!1}paint(){const e=this.#o.peek(),t=this.#i.peek(),i=this.#s.peek();switch(this.#l.reset(),e.showGrid&&this.#l.paintGrid(t),i.type){case"idle":this.#d(!1,i.hovered,!1),this.focused&&e.showCrosshair&&this.#l.paintCrosshair(t,i.cursor,!1);break;case"scroll":this.#d(!1,null,!1);break;case"select":this.#d(!1,null,!1),this.#l.paintSelection(t,i.origin,i.cursor);break;case"wire-start":this.#d(!0,null,!1),this.#l.paintCrosshair(t,i.cursor,!0);break;case"wire":this.#l.paintCrosshair(t,i.cursor,!0),this.#d(!0,null,!1);for(const a of i.wires)this.#l.paintWire(t,a,!0);break;case"move":case"paste":this.#d(!0,null,!0);const s=st(i.mover.elements,!1),r=t.toScreenX(b.snap((s.x0+s.x1)/2)),o=t.toScreenY(b.snap((s.y0+s.y1)/2));this.#l.paintCrosshair(t,{x:r,y:o},!0);break}}#d(e,t,i){const s=this.#t.peek(),r=this.#i.peek(),o=this.#r.peek();for(const a of s.instances)this.#l.paintInstance(r,a,o.has(a)),a.symbol!==re.ground&&this.#l.paintLabels(r,a,o.has(a)),(a===t||i)&&(this.#l.paintArea(r,a.area,!1),this.#l.paintOrigin(r,a,!1));for(const a of s.notes)o.has(a)?(this.#l.paintArea(r,a.area,!0),this.#l.paintOrigin(r,a,!0)):(a===t||i)&&(this.#l.paintArea(r,a.area,!1),this.#l.paintOrigin(r,a,!1));for(const a of s.wires)this.#l.paintWire(r,a,o.has(a));for(const a of s.instances)(e||a===t)&&this.#l.paintPins(r,a,o.has(a));this.#l.paintJoins(r,s.network.joins)}}const oi=It(null);function ie(){return Pn(oi)}function ai(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=ai(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Sr(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=ai(n))&&(i&&(i+=" "),i+=e);return i}const Ar="_root_1813r_1",$r="_item_1813r_9",Lr="_selected_1813r_22";function Ir(){const n=ie(),{schematic:e,selection:t}=n;return c("ul",{class:Ar,children:e.instances.filter(({symbol:i})=>i!==re.ground&&i!==re.port).map(i=>c("li",{class:Sr($r,t.has(i)&&Lr),onClick:()=>{n.select([i]),n.focus()},children:[i.symbol.id,":",i.name," (#",i.id,")"]},i.id))})}function li({canvas:n,style:e,...t}){return c("canvas",{...t,ref:n,style:{display:"block",inlineSize:"100%",blockSize:"100%",...e}})}const ci=n=>{const e=n.getContext("2d"),t=devicePixelRatio,{width:i,height:s}=n.getBoundingClientRect(),r=Math.max(1,i*t),o=Math.max(1,s*t);return(n.width!==r||n.height!==o)&&(n.width=r,n.height=o,e.scale(t,t)),{width:r,height:o}},Pr="_root_1ar66_1",Nr="_category_1ar66_5",Tr="_title_1ar66_10",Dr="_list_1ar66_15",Er="_symbol_1ar66_24";function Gr(){const{library:n}=ie(),e=Object.groupBy(n,({category:t})=>t);return c("div",{class:Pr,children:Object.entries(e).map(([t,i])=>c(Or,{name:t,symbols:i},t))})}function Or({name:n,symbols:e}){return c("div",{class:Nr,children:[c("div",{class:Tr,children:n}),c("div",{class:Dr,children:e.map(t=>c(Wr,{symbol:t},t.id))})]})}function Wr({symbol:n}){const e=ie(),t=ge(null);return ct(()=>{const{width:i,height:s}=ci(t.current);new ri(t.current).paintSymbolIcon(n,i,s)},[n]),c("div",{class:Er,title:n.name,onClick:()=>{e.pasteInstance(n)},children:c(li,{canvas:t})})}const zr="_root_k0zzy_1",Ur="_item_k0zzy_9";function Rr(){const n=ie(),{schematic:e}=n;return c("ul",{class:zr,children:e.network.nodes.map(t=>c("li",{class:Ur,onClick:()=>{n.select(t.elements),n.focus()},children:t.name},t.name))})}function ui({inputRef:n={current:null},type:e="text",value:t,onFocus:i,onBlur:s,onChange:r,...o}){const a=ge(null);In(n,()=>({focus(){a.current.focus()},blur(){a.current.blur()},get focused(){return document.activeElement===a.current},select(){a.current.select()}}));const[l,u]=lt(t);return e==="textarea"?c("textarea",{...o,ref:a,value:l,onInput:f=>{u(f.currentTarget.value)},onFocus:f=>{i?.(f)},onBlur:f=>{r(l),s?.(f)},onKeyDown:f=>{f.key==="Enter"&&A.of(f)===A.Control&&(f.preventDefault(),r(l))}}):c("input",{...o,ref:a,type:e,value:l,onInput:f=>{u(f.currentTarget.value)},onFocus:f=>{i?.(f)},onBlur:f=>{r(l),s?.(f)},onKeyDown:f=>{f.key==="Enter"&&A.of(f)===A.None&&(f.preventDefault(),r(l))}})}const Br="_root_hzlci_1",ln="_title_hzlci_8",Fr="_table_hzlci_13",jr="_propName_hzlci_19",qr="_propValue_hzlci_26",Zr="_propTitle_hzlci_33",Yr="_input_hzlci_41";function Xr({instance:n}){const e=ie(),{device:t}=n.symbol;return c("div",{class:Br,children:[c("div",{class:ln,children:n.symbol.name}),c("div",{class:ln,children:["name: ",n.name]}),t!=null&&c("table",{class:Fr,children:c("tbody",{children:Object.entries(t.propertiesSchema).map(([i,s])=>c("tr",{children:[c("td",{class:jr,children:i}),c("td",{class:qr,children:c(ui,{class:Yr,type:"text",value:String(s.defaultValue||"0"),onChange:r=>{e.edit({type:"set-instance-prop",instance:n,name:i,value:r})}})}),c("td",{class:Zr,children:s.title})]}))})})]})}var Kr="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",Jr="M11 2H13V7H21V10H13V14H18V17H13V22H11V17H6V14H11V10H3V7H11V2Z",Qr="M4 22H2V2H4V22M22 7H6V10H22V7M16 14H6V17H16V14Z",eo="M20 2H22V22H20V2M2 10H18V7H2V10M8 17H18V14H8V17Z",to="M22 22H2V20H22V22M10 2H7V18H10V2M17 8H14V18H17V8Z",no="M22 11H17V6H14V11H10V3H7V11H1.8V13H7V21H10V13H14V18H17V13H22V11Z",io="M22 2V4H2V2H22M7 22H10V6H7V22M14 16H17V6H14V16Z",so="M7,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H7A2,2 0 0,1 5,20V4A2,2 0 0,1 7,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z",ro="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",oo="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",ao="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",lo="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",co="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",uo="M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",ho="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",fo="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",po="M15 21H17V19H15M19 9H21V7H19M3 5V19C3 20.1 3.9 21 5 21H9V19H5V5H9V3H5C3.9 3 3 3.9 3 5M19 3V5H21C21 3.9 20.1 3 19 3M11 23H13V1H11M19 17H21V15H19M15 5H17V3H15M19 13H21V11H19M19 21C20.1 21 21 20.1 21 19H19Z",_o="M3 15V17H5V15M15 19V21H17V19M19 3H5C3.9 3 3 3.9 3 5V9H5V5H19V9H21V5C21 3.9 20.1 3 19 3M21 19H19V21C20.1 21 21 20.1 21 19M1 11V13H23V11M7 19V21H9V19M19 15V17H21V15M11 19V21H13V19M3 19C3 20.1 3.9 21 5 21V19Z",mo="M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M14 9H16V13H19L15 17L11 13H14Z",vo="M13 19C13 19.34 13.04 19.67 13.09 20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.89 4 4 4H10L12 6H20C21.1 6 22 6.89 22 8V13.81C21.39 13.46 20.72 13.22 20 13.09V8H4V18H13.09C13.04 18.33 13 18.66 13 19M20 18V15H18V18H15V20H18V23H20V20H23V18H20Z",yo="M20 18H4V8H20M20 6H12L10 4H4A2 2 0 0 0 2 6V18A2 2 0 0 0 4 20H20A2 2 0 0 0 22 18V8A2 2 0 0 0 20 6M16 17H14V13H11L15 9L19 13H16Z",go="M20.5,18L17.5,21V19H5V17H17.5V15L20.5,18M10.13,10H13.88L12,4.97L10.13,10M12.75,3L17.5,14H15.42L14.5,11.81H9.5L8.58,14H6.5L11.25,3H12.75Z",bo="M3 12V13.5L14 18.25V16.15L11.8 15.25V10.25L14 9.35V7.25L3 12M10 14.62L5 12.75L10 10.88V14.62M18 4.25L15 7.25H17V19.75H19V7.25H21L18 4.25Z",Vo="M10,4V8H14V4H10M16,4V8H20V4H16M16,10V14H20V10H16M16,16V20H20V16H16M14,20V16H10V20H14M8,20V16H4V20H8M8,14V10H4V14H8M8,8V4H4V8H8M10,14H14V10H10V14M4,2H20A2,2 0 0,1 22,4V20A2,2 0 0,1 20,22H4C2.92,22 2,21.1 2,20V4A2,2 0 0,1 4,2Z",wo="M0,2.77L1.28,1.5L22.5,22.72L21.23,24L19.23,22H4C2.92,22 2,21.1 2,20V4.77L0,2.77M10,4V7.68L8,5.68V4H6.32L4.32,2H20A2,2 0 0,1 22,4V19.7L20,17.7V16H18.32L16.32,14H20V10H16V13.68L14,11.68V10H12.32L10.32,8H14V4H10M16,4V8H20V4H16M16,20H17.23L16,18.77V20M4,8H5.23L4,6.77V8M10,14H11.23L10,12.77V14M14,20V16.77L13.23,16H10V20H14M8,20V16H4V20H8M8,14V10.77L7.23,10H4V14H8Z",xo="M10,19H13V22H10V19M12,2C17.35,2.22 19.68,7.62 16.5,11.67C15.67,12.67 14.33,13.33 13.67,14.17C13,15 13,16 13,17H10C10,15.33 10,13.92 10.67,12.92C11.33,11.92 12.67,11.33 13.5,10.67C15.92,8.43 15.32,5.26 12,5A3,3 0 0,0 9,8H6A6,6 0 0,1 12,2Z",ko="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",Ho="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",Co="M18 16H17.42L16.61 15.19C17.5 14 18 12.5 18 11C18 7.13 14.87 4 11 4C9.5 4 8 4.5 6.79 5.4C3.7 7.72 3.07 12.11 5.39 15.2C7.71 18.29 12.1 18.92 15.19 16.6L16 17.41V18L21 23L23 21L18 16M11 16C8.24 16 6 13.76 6 11S8.24 6 11 6 16 8.24 16 11 13.76 16 11 16M3 6L1 8V1H8L6 3H3V6M21 1V8L19 6V3H16L14 1H21M6 19L8 21H1V14L3 16V19H6Z",Mo="M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z",So="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z",Ao="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",$o="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z",Lo="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,5.55Z",Io="M9,9H15V15H9M7,17H17V7H7M15,5H17V3H15M15,21H17V19H15M19,17H21V15H19M19,9H21V7H19M19,21A2,2 0 0,0 21,19H19M19,13H21V11H19M11,21H13V19H11M9,3H7V5H9M3,17H5V15H3M5,21V19H3A2,2 0 0,0 5,21M19,3V5H21A2,2 0 0,0 19,3M13,3H11V5H13M3,9H5V7H3M7,21H9V19H7M3,13H5V11H3M3,5H5V3A2,2 0 0,0 3,5Z",Po="M5,3H7V5H9V3H11V5H13V3H15V5H17V3H19V5H21V7H19V9H21V11H19V13H21V15H19V17H21V19H19V21H17V19H15V21H13V19H11V21H9V19H7V21H5V19H3V17H5V15H3V13H5V11H3V9H5V7H3V5H5V3Z",No="M1,4.27L2.28,3L21,21.72L19.73,23L17,20.27V21H15V19H15.73L5,8.27V9H3V7H3.73L1,4.27M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M21,7V9H19V7H21Z",To="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",Do="M16.59,5.41L15.17,4L12,7.17L8.83,4L7.41,5.41L12,10M7.41,18.59L8.83,20L12,16.83L15.17,20L16.58,18.59L12,14L7.41,18.59Z",Eo="M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z";const Go="_root_1pl8d_1";function H({class:n=Go,shape:e,viewBox:t="0 0 24 24",size:i="2rem",...s}){return c("svg",{class:n,viewBox:t,width:i,height:i,...s,children:c("path",{d:e})})}const Oo="_root_12ddp_1";function S({autoFocus:n,checked:e,class:t=Oo,disabled:i,icon:s,tabIndex:r,title:o,...a}){return c("button",{class:t,disabled:i,tabIndex:r,autoFocus:n,"aria-checked":e,title:o,...a,children:s})}const Wo="_root_1oe1v_1",zo="_separator_1oe1v_6";function J({children:n,class:e=Wo}){return c("div",{class:e,children:n})}function Uo(){return c("span",{class:zo})}J.Separator=Uo;const Ro="_root_1dace_1",Bo="_title_1dace_8",Fo="_toolbar_1dace_13",jo="_text_1dace_22";function qo({note:n}){const e=ie(),t=oe(n.align),i=ae(n.align),s=n.dir;return c("div",{class:Ro,children:[c("div",{class:Bo,children:"Note"}),c(J,{class:Fo,children:[c(S,{icon:c(H,{shape:Qr,size:"24px"}),checked:t==="l",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`l${i}`})}}),c(S,{icon:c(H,{shape:Jr,size:"24px"}),checked:t==="c",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`c${i}`})}}),c(S,{icon:c(H,{shape:eo,size:"24px"}),checked:t==="r",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`r${i}`})}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:io,size:"24px"}),checked:i==="t",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`${t}t`})}}),c(S,{icon:c(H,{shape:no,size:"24px"}),checked:i==="m",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`${t}m`})}}),c(S,{icon:c(H,{shape:to,size:"24px"}),checked:i==="b",onClick:()=>{e.edit({type:"set-note-align",note:n,align:`${t}b`})}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:go,size:"24px"}),checked:s==="h",onClick:()=>{e.edit({type:"set-note-dir",note:n,dir:"h"})}}),c(S,{icon:c(H,{shape:bo,size:"24px"}),checked:s==="v",onClick:()=>{e.edit({type:"set-note-dir",note:n,dir:"v"})}})]}),c(ui,{class:jo,type:"textarea",value:n.text,placeholder:"note...",onChange:r=>{e.edit({type:"set-note-text",note:n,text:r})}})]})}const hi="_root_d1mui_1",Zo="_empty_d1mui_7",Yo="_title_d1mui_11";function Xo(){const n=ie(),{schematic:e,selection:t}=n,i=t.filter(e);if(i.length===1){const[s]=i;if(s instanceof le)return c(Xr,{instance:s},s.id);if(s instanceof He)return c(qo,{note:s},s.id);if(s instanceof R)return c(Ko,{wire:s},s.id)}return c("div",{class:hi,children:c("div",{class:Zo,children:"-"})})}function Ko({wire:n}){return c("div",{class:hi,children:c("div",{class:Yo,children:"Wire"})})}function Jo(n){const[e,t]=lt(new DOMRect);return ct(()=>{const{current:i}=n;if(i==null)return;const s=new ResizeObserver(()=>{t(i.getBoundingClientRect())});return s.observe(i),()=>{s.disconnect()}},[n]),e}function Qo(n,e){for(var t in e)n[t]=e[t];return n}function Ct(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function cn(n,e){this.props=n,this.context=e}function ea(n,e){function t(s){var r=this.props.ref,o=r==s.ref;return!o&&r&&(r.call?r(null):r.current=null),e?!e(this.props,s)||!o:Ct(this.props,s)}function i(s){return this.shouldComponentUpdate=t,Ke(n,s)}return i.displayName="Memo("+(n.displayName||n.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(cn.prototype=new ne).isPureReactComponent=!0,cn.prototype.shouldComponentUpdate=function(n,e){return Ct(this.props,n)||Ct(this.state,e)};var un=x.__b;x.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),un&&un(n)};var ta=x.__e;x.__e=function(n,e,t,i){if(n.then){for(var s,r=e;r=r.__;)if((s=r.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(n,e)}ta(n,e,t,i)};var hn=x.unmount;function fi(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=Qo({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return fi(i,e,t)})),n}function di(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return di(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function vt(){this.__u=0,this.o=null,this.__b=null}function pi(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function je(){this.i=null,this.l=null}x.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),hn&&hn(n)},(vt.prototype=new ne).__c=function(n,e){var t=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(t);var s=pi(i.__v),r=!1,o=function(){r||(r=!0,t.__R=null,s?s(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=di(l,l.__c.__P,l.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.o.pop();)u.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(o,o)},vt.prototype.componentWillUnmount=function(){this.o=[]},vt.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=fi(this.__b,t,i.__O=i.__P)}this.__b=null}var s=e.__a&&Ke(fe,null,n.fallback);return s&&(s.__u&=-33),[Ke(fe,null,e.__a?null:n.children),s]};var fn=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(je.prototype=new ne).__a=function(n){var e=this,t=pi(e.__v),i=e.l.get(n);return i[0]++,function(s){var r=function(){e.props.revealOrder?(i.push(s),fn(e,n,i)):s()};t?t(r):r()}},je.prototype.render=function(n){this.i=null,this.l=new Map;var e=Qe(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},je.prototype.componentDidUpdate=je.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){fn(n,t,e)})};var na=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ia=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,sa=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ra=/[A-Z0-9]/g,oa=typeof document<"u",aa=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};ne.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(ne.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var dn=x.event;function la(){}function ca(){return this.cancelBubble}function ua(){return this.defaultPrevented}x.event=function(n){return dn&&(n=dn(n)),n.persist=la,n.isPropagationStopped=ca,n.isDefaultPrevented=ua,n.nativeEvent=n};var ha={enumerable:!1,configurable:!0,get:function(){return this.class}},pn=x.vnode;x.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,i=e.type,s={},r=i.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||oa&&o==="children"&&i==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||aa(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":sa.test(o)&&(o=l):l=o="oninput":r&&ia.test(o)?o=o.replace(ra,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&s[o=l]&&(o="oninputCapture"),s[o]=a}}i=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Qe(t.children).forEach(function(u){u.props.selected=s.value.indexOf(u.props.value)!=-1})),i=="select"&&s.defaultValue!=null&&(s.value=Qe(t.children).forEach(function(u){u.props.selected=s.multiple?s.defaultValue.indexOf(u.props.value)!=-1:s.defaultValue==u.props.value})),t.class&&!t.className?(s.class=t.class,Object.defineProperty(s,"className",ha)):(t.className&&!t.class||t.class&&t.className)&&(s.class=s.className=t.className),e.props=s}(n),n.$$typeof=na,pn&&pn(n)};var _n=x.__r;x.__r=function(n){_n&&_n(n),n.__c};var mn=x.diffed;x.diffed=function(n){mn&&mn(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};const fa={open:/\$/y,close:/\$/y},da={open:/\\\(/y,close:/\\\)/y},pa={open:/\$\$/y,close:/\$\$/y},_a={open:/\\\[/y,close:/\\\]/y},vn=/\s+|\\\{|\\\}|\\\\/y;function ma(n){let e=rt(n,"$","$"),t=rt(n,"\\(","\\)");if(e!==-1&&t!==-1)return Math.min(e,t);if(e!==-1)return e;if(t!==-1)return t}function va(n,e){return ot(n,fa,e)||ot(n,da,e)}function ya(n){let e=rt(n,"$$","$$"),t=rt(n,"\\[","\\]");if(e!==-1&&t!==-1)return Math.min(e,t);if(e!==-1)return e;if(t!==-1)return t}function ga(n,e){return ot(n,pa,e)||ot(n,_a,e)}function rt(n,e,t){let i=n.indexOf(e);return i!==-1&&n.indexOf(t,i+e.length+1)===-1&&(i=-1),i}function ot(n,e,t){if(yt(n,e.open,0)){let i=e.open.lastIndex;for(;i<n.length;)if(yt(n,vn,i))i=vn.lastIndex;else{if(yt(n,e.close,i))return t.raw=n.substring(0,e.close.lastIndex),t.text=n.substring(e.open.lastIndex,i).trim(),!0;i+=1}}return!1}function yt(n,e,t){return e.lastIndex=t,e.test(n)}function ba(n){return{extensions:[Va(n),wa(n)]}}function Va(n){const e={raw:"",text:""};return{name:"blockKatex",level:"block",start(t){return ya(t)},tokenizer(t){if(ga(t,e))return{type:"blockKatex",raw:e.raw,text:e.text}},renderer({text:t}){return gn(t,{...n,displayMode:!0})+`
`}}}function wa(n){const e={raw:"",text:""};return{name:"inlineKatex",level:"inline",start(t){return ma(t)},tokenizer(t){if(va(t,e))return{type:"inlineKatex",raw:e.raw,text:e.text}},renderer({text:t}){return gn(t,{...n,displayMode:!1})}}}const xa=new yi(ba({output:"mathml",throwOnError:!1}));function ka(n){return xa.parse(n,{async:!1,silent:!0,gfm:!1,pedantic:!1})}const Ha="_root_2mcg2_1",Ca=ea(Ma);function Ma({note:n,text:e,align:t,dir:i,x:s,y:r,width:o,height:a}){const l=ge(null);Te(()=>{l.current.setHTMLUnsafe(ka(e||"note..."))},[e]),Te(()=>{n.width=l.current.offsetWidth,n.height=l.current.offsetHeight});const u=Sa(s,r,t,i);return c("div",{ref:l,class:Ha,style:u,"data-align":t,"data-h-align":oe(t),"data-v-align":ae(t),"data-dir":i})}function Sa(n,e,t,i){let s=0,r=0;switch(oe(t)){case"l":s=0;break;case"c":s=-50;break;case"r":s=-100;break}switch(ae(t)){case"t":r=0;break;case"m":r=-50;break;case"b":r=-100;break}let o=0;switch(i){case"v":o=-90;break;case"h":o=0;break}return{position:"absolute",left:n,top:e,transformOrigin:`${-s}% ${-r}%`,translate:`${s}% ${r}%`,rotate:`${o}deg`}}const Aa="_root_1nll4_1";function $a(){const{schematic:n,zoom:e}=ie();return c("div",{class:Aa,style:{transformOrigin:"0px 0px",translate:`${e.x}px ${e.y}px`,scale:`${e.scale}`},children:n.notes.map(t=>c(Ca,{note:t,text:t.text,align:t.align,dir:t.dir,x:t.x,y:t.y,width:t.width,height:t.height},t.id))})}const La="_root_1hx45_1";function Ia(){const n=ie(),e=ge(null),t=ge(null),{width:i,height:s}=Jo(t);return In(n.focusRef,()=>({focus:()=>{e.current?.focus()},blur:()=>{e.current?.blur()},get focused(){return e.current===document.activeElement}})),Te(()=>{i>0&&s>0&&(ci(t.current),n.attach(t.current))},[n,i,s]),Te(()=>{if(i>0&&s>0){const r=requestAnimationFrame(()=>{n.paint()});return()=>{cancelAnimationFrame(r)}}},[n,i,s,n.settings,n.schematic,n.zoom,n.selection,n.mouseAction]),c("div",{ref:e,class:La,tabIndex:0,autofocus:!0,onFocus:n.handleFocus,onBlur:n.handleBlur,onKeyDown:n.handleKeyDown,onKeyUp:n.handleKeyUp,style:Pa(n),children:[c(li,{canvas:t,onMouseDown:n.handleMouseDown,onMouseMove:n.handleMouseMove,onMouseUp:n.handleMouseUp,onWheel:n.handleWheel,onContextMenu:n.handleContextMenu}),c($a,{})]})}function Pa(n){switch(n.mouseAction.type){case"scroll":return{cursor:"all-scroll"};case"wire-start":case"wire":return{cursor:"crosshair"};case"move":case"paste":return{cursor:"move"}}return{cursor:"default"}}const Na=It(null),Ta="_root_3m5pl_1 _fadeIn_kq333_1";let Da=0;class Ea{constructor(e,t){this.message=e,this.options=t}#e=Da+=1;get key(){return this.#e}}const Ve=te([]);function Ga(n){Ve.value=[...Ve.value,n]}function Oa(n){Ve.value=Ve.value.filter(e=>e!==n)}function Wa({message:n}){const e=ge(null);return ct(()=>{n.options.modal?e.current?.showModal():e.current?.show()},[n]),c("dialog",{ref:e,class:Ta,onClose:()=>{Oa(n),n.options.onClose()},children:c(Na.Provider,{value:{close:()=>{e.current?.close()}},children:n.message})},n.key)}const za="_root_5uo3x_1";function Ua(){return c("div",{class:za,hidden:Ve.value.length===0,children:Ve.value.map(n=>c(Wa,{message:n}))})}function yn(n,{modal:e=!0,onClose:t=()=>{}}={}){Ga(new Ea(n,{modal:e,onClose:t}))}const Ra="_alert_ppbdc_1 _fadeIn_kq333_1",Ba="_message_ppbdc_17";class Fa{#e=new Set;get pending(){return this.#e.size}delayed(e,t){let i=!1,s=!1;const r=()=>{s||(s=!0,this.#e.delete(o),clearTimeout(a))},o=new class{cancel(){r()}get fired(){return i}get cancelled(){return s}};this.#e.add(o);const a=setTimeout(()=>{s||(this.#e.delete(o),i=!0,t())},e);return o}repeated(e,t){let i=!1,s=!1;const r=()=>{s||(s=!0,this.#e.delete(o),clearInterval(a))},o=new class{cancel(){r()}get fired(){return i}get cancelled(){return s}};this.#e.add(o);const a=setInterval(()=>{s||(i=!0,t())},e);return o}cancelAll(){for(const e of this.#e)e.cancel();return this}}const ja=new Fa;let qa=0;class Za{constructor(e,t){this.message=e,this.options=t}#e=qa+=1;#n=null;get key(){return this.#e}delayed(e,t){this.clearDelayed(),this.#n=ja.delayed(t,e)}clearDelayed(){this.#n!=null&&(this.#n.cancel(),this.#n=null)}}const we=te([]);function Ya(n){we.value=[...we.value,n],_i(n)}function Mt(n){we.value=we.value.filter(e=>e!==n)}function Xa(n,e){e?n.clearDelayed():_i(n)}function _i(n){n.options.autoClose&&n.delayed(()=>{Mt(n)},n.options.autoClose)}const mi=It(null);function Ka({toast:n,children:e}){return c(mi.Provider,{value:{close:()=>{Mt(n)},hover:t=>{n.options.autoClose&&n.options.pauseOnHover&&Xa(n,t)},click:()=>{n.options.closeOnClick&&Mt(n)}},children:e})}function Wt(){return Pn(mi)}function vi(n){return{onMouseEnter:()=>{n.hover(!0)},onMouseLeave:()=>{n.hover(!1)},onClick:()=>{n.click()}}}function Ja({children:n}){return Hi(n,{...n.props,...vi(Wt())})}function Qa(){const n=Wt();return c(H,{shape:oo,onClick:()=>{n.close()}})}function el({severity:n}){switch(n){case"info":return c(tl,{});case"success":return c(nl,{});case"error":return c(il,{});default:return null}}function tl(){return c(H,{shape:ko})}function nl(){return c(H,{shape:ro})}function il(){return c(H,{shape:Kr})}function sl({children:n,severity:e=null,closeButton:t=!0}){const i=Wt();return c("div",{class:Ra,...vi(i),popover:!0,children:[e&&c(el,{severity:e}),c("div",{class:Ba,children:n}),t&&c(Qa,{})]})}const rl="_root_1k080_1";function ol(){return c("div",{class:rl,hidden:we.value.length===0,children:[...we.value].reverse().map(n=>c(Ka,{toast:n,children:c(Ja,{children:n.message})},n.key))})}function al(n,{autoClose:e=3e3,pauseOnHover:t=!0,closeOnClick:i=!0}={}){Ya(new Za(n,{autoClose:e,pauseOnHover:t,closeOnClick:i}))}function Ie({error:n}){return c(sl,{severity:"error",children:n instanceof AggregateError?n.errors.map((e,t)=>c("p",{children:String(e)},t)):c("p",{children:String(n)})})}function ll(n,{autoClose:e=3e3,pauseOnHover:t=!0,closeOnClick:i=!1}={}){al(c(Ie,{error:n}),{autoClose:e,pauseOnHover:t,closeOnClick:i})}Ie.report=ll;const cl="_root_yio74_1",ul="_header_yio74_9",hl="_headerText_yio74_14",fl="_headerButton_yio74_25",dl="_content_yio74_29",pl="_resize_yio74_36";function qe({title:n,children:e,style:t}){const[i,s]=lt(!0);return c("div",{class:cl,style:t,children:[c("div",{class:ul,children:[c("span",{class:hl,children:n}),c("span",{class:fl,onClick:()=>{s(!i)},children:c(H,{shape:i?Do:Eo})})]}),i&&c(fe,{children:[c("div",{class:dl,children:e}),c(_l,{})]})]})}function _l(){return c("svg",{class:pl,viewBox:"0 0 24 24",children:c("path",{d:"M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z"})})}const ml="_root_948vb_1",vl="_toolbar_948vb_8",yl="_schematic_948vb_17";function gl(){return new K(be([["i",50,50,0,"vdc","V1",{}],["i",150,50,0,"r","R1",{}],["i",50,120,0,"g","G1",{}],["w",50,0,150,0],["w",50,100,150,100],["w",50,0,50,20],["w",50,80,50,100],["w",50,100,50,120],["w",150,0,150,20],["w",150,80,150,100],["n",250,0,"lt","h",`# Ohm's law

*Ohm's law* states that the electric current $I$ through a conductor between two points is directly proportional to the voltage $V$ across the two points.

$$I = \\frac{V}{R}$$

The law was named after the German physicist *Georg Ohm*.`],["n",700,0,"lm","h","\\[ \\int_{a}^{b} x^2 \\, dx \\]"],["n",700,50,"lm","h","\\[ \\iint_V \\mu(u,v) \\, du \\, dv \\]"],["n",700,100,"lm","h","\\[ \\oint_V f(s) \\, ds \\]"],["n",700,150,"lm","h","\\[ \\sum_{n=1}^{\\infty} 2^{-n} = 1 \\]"],["n",700,200,"lm","h","\\[ \\prod_{i=a}^{b} f(i) \\]"],["n",700,250,"lm","h","\\[ \\lim_{x\\to\\infty} f(x) \\]"],["n",700,300,"lm","h","\\[ \\begin{pmatrix} 1 & 2 & 3 \\\\ a & b & c \\end{pmatrix} \\]"]]))}const bl="_root_1bk49_1",Vl="_select_1bk49_8",wl="_content_1bk49_13";function xl(){return c("p",{children:"Capacitive reactance"})}function kl(){return c("p",{children:"Inductive reactance"})}function Hl(){return c("p",{children:"Resistive voltage divider"})}function Cl(){return c("p",{children:"LC resonance"})}function Ml(){return c("p",{children:"Wavelength and frequency"})}const Ze=[{name:"Resistive voltage divider",component:Hl},{name:"Capacitive reactance",component:xl},{name:"Inductive reactance",component:kl},{name:"LC resonance",component:Cl},{name:"Wavelength and frequency",component:Ml}];function Sl(){const[n,e]=lt(Ze[0]),{component:t}=n;return c("section",{class:bl,children:[c("select",{class:Vl,value:n.name,onInput:({target:i})=>{const{value:s}=i;e(Ze.find(({name:r})=>r===s)??Ze[0])},children:Ze.map(({name:i})=>c("option",{value:i,children:i}))}),c("div",{class:wl,children:c(t,{})})]})}const Al="_root_8tr57_1";function $l(){return c("section",{class:Al,children:[c("p",{children:["To draw a wire, click and start moving the pointer from a device pin, a wire end, or a wire junction. To draw a wire from any location on the grid, press ",c("kbd",{children:"W"}),". To change a wire's angle, press ",c("kbd",{children:"Shift"}),". To draw a diagonal wire, press ",c("kbd",{children:"Alt"}),"."]}),c("p",{children:"Shortcuts:"}),c("ul",{children:[c("li",{children:[c("kbd",{children:"W"})," Start drawing a wire from any point on the grid"]}),c("li",{children:[c("kbd",{children:"Shift"})," While drawing a wire, changes the angle of the wire"]}),c("li",{children:[c("kbd",{children:"Alt"})," While drawing a wire, draws a diagonal wire"]}),c("li",{children:[c("kbd",{children:"G"})," Place a ground symbol"]}),c("li",{children:[c("kbd",{children:"O"})," Place a port symbol"]}),c("li",{children:[c("kbd",{children:"V"})," Place a voltage source"]}),c("li",{children:[c("kbd",{children:"I"})," Place a current source"]}),c("li",{children:[c("kbd",{children:"R"})," Place a resistor"]}),c("li",{children:[c("kbd",{children:"C"})," Place a capacitor"]}),c("li",{children:[c("kbd",{children:"L"})," Place an inductor"]}),c("li",{children:[c("kbd",{children:"D"})," Place a diode"]}),c("li",{children:[c("kbd",{children:"N"})," Place an NPN transistor"]}),c("li",{children:[c("kbd",{children:"P"})," Place a PNP transistor"]}),c("li",{children:[c("kbd",{children:"Shift+N"})," Place an N-channel MOSFET"]}),c("li",{children:[c("kbd",{children:"Shift+P"})," Place a P-channel MOSFET"]}),c("li",{children:[c("kbd",{children:"A"})," Place an operational amplifier"]}),c("li",{children:[c("kbd",{children:"Home"})," Zoom to 100%"]}),c("li",{children:[c("kbd",{children:"Space"})," Expand or shrink to cover the whole screen"]}),c("li",{children:[c("kbd",{children:"Ctrl+X"})," Cut selected item(s) to clipboard"]}),c("li",{children:[c("kbd",{children:"Ctrl+C"})," Copy selected item(s) to clipboard"]}),c("li",{children:[c("kbd",{children:"Ctrl+V"})," Paste item(s) from clipboard"]}),c("li",{children:[c("kbd",{children:"Ctrl+A"})," Select all"]}),c("li",{children:[c("kbd",{children:"Delete"})," Delete selected item(s)"]}),c("li",{children:[c("kbd",{children:"Alt+L"})," Rotate selected item(s) to the left"]}),c("li",{children:[c("kbd",{children:"Alt+R"})," Rotate selected item(s) to the right"]}),c("li",{children:[c("kbd",{children:"Alt+H"})," Flip selected item(s) from left to right"]}),c("li",{children:[c("kbd",{children:"Alt+V"})," Flip selected item(s) from top to bottom"]}),c("li",{children:[c("kbd",{children:"Ctrl+Z"})," Undo"]}),c("li",{children:[c("kbd",{children:"Ctrl+Y"})," Redo"]})]})]})}const Ll="_root_1qxgy_1";function Il(){const n=ie(),{settings:e}=n;return c(J,{class:Ll,children:[c(S,{icon:c(H,{shape:mo}),title:"Open schematic",onClick:()=>{Ie.report("Not implemented")}}),c(S,{icon:c(H,{shape:yo}),title:"Save schematic",onClick:()=>{Ie.report("Not implemented")}}),c(S,{icon:c(H,{shape:vo}),title:"New schematic",onClick:()=>{Ie.report("Not implemented")}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:Io}),title:"Select all",onClick:()=>{n.select("all"),n.focus()}}),c(S,{icon:c(H,{shape:Po}),title:"Invert selection",onClick:()=>{n.select("invert"),n.focus()}}),c(S,{icon:c(H,{shape:No}),title:"Clear selection",onClick:()=>{n.select("none"),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:lo}),title:"Cut selected item(s) to clipboard",onClick:()=>{n.selectionCut(),n.focus()}}),c(S,{icon:c(H,{shape:ao}),title:"Copy selected item(s) to clipboard",onClick:()=>{n.selectionCopy(),n.focus()}}),c(S,{icon:c(H,{shape:co}),title:"Paste item(s) from clipboard",onClick:()=>{n.selectionPaste(),n.focus()}}),c(S,{icon:c(H,{shape:fo}),title:"Delete selected item(s)",onClick:()=>{n.selectionDelete(),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:$o}),title:"Rotate selected item(s) to the left",disabled:!n.selection.full,onClick:()=>{n.transformSelection("rl"),n.focus()}}),c(S,{icon:c(H,{shape:Lo}),title:"Rotate selected item(s) to the right",disabled:!n.selection.full,onClick:()=>{n.transformSelection("rr"),n.focus()}}),c(S,{icon:c(H,{shape:po}),title:"Flip selected item(s) from left to right",disabled:!n.selection.full,onClick:()=>{n.transformSelection("mx"),n.focus()}}),c(S,{icon:c(H,{shape:_o}),title:"Flip selected item(s) from top to bottom",disabled:!n.selection.full,onClick:()=>{n.transformSelection("my"),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:To}),title:"Undo",disabled:!n.history.canUndo,onClick:()=>{n.undo(),n.focus()}}),c(S,{icon:c(H,{shape:Ao}),title:"Redo",disabled:!n.history.canRedo,onClick:()=>{n.redo(),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:Ho}),title:"Zoom 100%",onClick:()=>{n.zoomTo("1"),n.focus()}}),c(S,{icon:c(H,{shape:So}),title:"Zoom in",onClick:()=>{n.zoomTo("+"),n.focus()}}),c(S,{icon:c(H,{shape:Mo}),title:"Zoom out",onClick:()=>{n.zoomTo("-"),n.focus()}}),c(S,{icon:c(H,{shape:Co}),title:"View all",onClick:()=>{n.zoomTo("all"),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:e.showGrid?wo:Vo}),title:e.showGrid?"Hide grid":"Show grid",onClick:()=>{n.updateSettings({showGrid:!e.showGrid}),n.focus()}}),c(S,{icon:c(H,{shape:e.showCrosshair?ho:uo}),title:e.showCrosshair?"Hide crosshair":"Show crosshair",onClick:()=>{n.updateSettings({showCrosshair:!e.showCrosshair}),n.focus()}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:so}),title:"Calculator",onClick:()=>{yn(c(Sl,{}),{modal:!0,onClose:()=>{n.focus()}})}}),c(J.Separator,{}),c(S,{icon:c(H,{shape:xo}),title:"Help",onClick:()=>{yn(c($l,{}),{modal:!0,onClose:()=>{n.focus()}})}})]})}function Pl(){const n=ut(()=>new Mr(Bn,gl()),[]);return ct(()=>{const e=ti(["Alt+v",()=>{}],["Alt+h",()=>{}],["Alt+r",()=>{}],["Alt+l",()=>{}],["Ctrl+a",()=>{}],["Ctrl+s",()=>{}],["Ctrl+o",()=>{}],["Ctrl+n",()=>{}],["Ctrl+r",()=>{}]);return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n]),c(oi.Provider,{value:n,children:[c("main",{class:ml,children:[c("div",{class:vl,children:c(Il,{})}),c("div",{class:yl,children:c(Ia,{})}),c(qe,{title:"Instances",style:{insetInlineEnd:"38rem",insetBlockStart:"4rem",inlineSize:"15rem"},children:c(Ir,{})}),c(qe,{title:"Nodes",style:{insetInlineEnd:"20rem",insetBlockStart:"4rem",inlineSize:"15rem"},children:c(Rr,{})}),c(qe,{title:"Library",style:{insetInlineEnd:"2rem",insetBlockStart:"4rem",inlineSize:"15rem"},children:c(Gr,{})}),c(qe,{title:"Properties",style:{insetInlineStart:"2rem",insetBlockStart:"4rem"},children:c(Xo,{})})]}),c(Ua,{}),c(ol,{})]})}ki(c(Pl,{}),document.querySelector("#app"));
